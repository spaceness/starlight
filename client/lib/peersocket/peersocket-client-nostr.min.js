var tr=Object.create;var we=Object.defineProperty;var er=Object.getOwnPropertyDescriptor;var rr=Object.getOwnPropertyNames;var nr=Object.getPrototypeOf,ir=Object.prototype.hasOwnProperty;var Vt=(a=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(a,{get:(r,s)=>(typeof require<"u"?require:r)[s]}):a)(function(a){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+a+'" is not supported')});var Yt=(a,r)=>()=>(r||a((r={exports:{}}).exports,r),r.exports);var sr=(a,r,s,i)=>{if(r&&typeof r=="object"||typeof r=="function")for(let d of rr(r))!ir.call(a,d)&&d!==s&&we(a,d,{get:()=>r[d],enumerable:!(i=er(r,d))||i.enumerable});return a};var _e=(a,r,s)=>(s=a!=null?tr(nr(a)):{},sr(r||!a||!a.__esModule?we(s,"default",{value:a,enumerable:!0}):s,a));var Ee=Yt((ve,pe)=>{(function(a){if(typeof ve=="object"&&typeof pe<"u")pe.exports=a();else if(typeof define=="function"&&define.amd)define([],a);else{var r;r=typeof window>"u"?typeof global>"u"?typeof self>"u"?this:self:global:window,r.SimplePeer=a()}})(function(){var a=Math.floor,r=Math.abs,s=Math.pow;return function(){function i(d,f,c){function m(l,y){if(!f[l]){if(!d[l]){var h=typeof Vt=="function"&&Vt;if(!y&&h)return h(l,!0);if(C)return C(l,!0);var v=new Error("Cannot find module '"+l+"'");throw v.code="MODULE_NOT_FOUND",v}var E=f[l]={exports:{}};d[l][0].call(E.exports,function(x){var N=d[l][1][x];return m(N||x)},E,E.exports,i,d,f,c)}return f[l].exports}for(var C=typeof Vt=="function"&&Vt,o=0;o<c.length;o++)m(c[o]);return m}return i}()({1:[function(i,d,f){"use strict";function c(g){var b=g.length;if(0<b%4)throw new Error("Invalid string. Length must be a multiple of 4");var S=g.indexOf("=");S===-1&&(S=b);var w=S===b?0:4-S%4;return[S,w]}function m(g,b,S){return 3*(b+S)/4-S}function C(g){var b,S,w=c(g),A=w[0],B=w[1],_=new E(m(g,A,B)),R=0,L=0<B?A-4:A;for(S=0;S<L;S+=4)b=v[g.charCodeAt(S)]<<18|v[g.charCodeAt(S+1)]<<12|v[g.charCodeAt(S+2)]<<6|v[g.charCodeAt(S+3)],_[R++]=255&b>>16,_[R++]=255&b>>8,_[R++]=255&b;return B===2&&(b=v[g.charCodeAt(S)]<<2|v[g.charCodeAt(S+1)]>>4,_[R++]=255&b),B===1&&(b=v[g.charCodeAt(S)]<<10|v[g.charCodeAt(S+1)]<<4|v[g.charCodeAt(S+2)]>>2,_[R++]=255&b>>8,_[R++]=255&b),_}function o(g){return h[63&g>>18]+h[63&g>>12]+h[63&g>>6]+h[63&g]}function l(g,b,S){for(var w,A=[],B=b;B<S;B+=3)w=(16711680&g[B]<<16)+(65280&g[B+1]<<8)+(255&g[B+2]),A.push(o(w));return A.join("")}function y(g){for(var b,S=g.length,w=S%3,A=[],B=16383,_=0,R=S-w;_<R;_+=B)A.push(l(g,_,_+B>R?R:_+B));return w===1?(b=g[S-1],A.push(h[b>>2]+h[63&b<<4]+"==")):w===2&&(b=(g[S-2]<<8)+g[S-1],A.push(h[b>>10]+h[63&b>>4]+h[63&b<<2]+"=")),A.join("")}f.byteLength=function(g){var b=c(g),S=b[0],w=b[1];return 3*(S+w)/4-w},f.toByteArray=C,f.fromByteArray=y;for(var h=[],v=[],E=typeof Uint8Array>"u"?Array:Uint8Array,x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",N=0,u=x.length;N<u;++N)h[N]=x[N],v[x.charCodeAt(N)]=N;v[45]=62,v[95]=63},{}],2:[function(){},{}],3:[function(i,d,f){(function(){(function(){"use strict";var c=String.fromCharCode,m=Math.min;function C(t){if(2147483647<t)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return e.__proto__=o.prototype,e}function o(t,e,n){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v(t)}return l(t,e,n)}function l(t,e,n){if(typeof t=="string")return E(t,e);if(ArrayBuffer.isView(t))return x(t);if(t==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(T(t,ArrayBuffer)||t&&T(t.buffer,ArrayBuffer))return N(t,e,n);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var p=t.valueOf&&t.valueOf();if(p!=null&&p!==t)return o.from(p,e,n);var k=u(t);if(k)return k;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return o.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function y(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(0>t)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function h(t,e,n){return y(t),0>=t||e===void 0?C(t):typeof n=="string"?C(t).fill(e,n):C(t).fill(e)}function v(t){return y(t),C(0>t?0:0|g(t))}function E(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!o.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var n=0|b(t,e),p=C(n),k=p.write(t,e);return k!==n&&(p=p.slice(0,k)),p}function x(t){for(var e=0>t.length?0:0|g(t.length),n=C(e),p=0;p<e;p+=1)n[p]=255&t[p];return n}function N(t,e,n){if(0>e||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');var p;return p=e===void 0&&n===void 0?new Uint8Array(t):n===void 0?new Uint8Array(t,e):new Uint8Array(t,e,n),p.__proto__=o.prototype,p}function u(t){if(o.isBuffer(t)){var e=0|g(t.length),n=C(e);return n.length===0||t.copy(n,0,0,e),n}return t.length===void 0?t.type==="Buffer"&&Array.isArray(t.data)?x(t.data):void 0:typeof t.length!="number"||I(t.length)?C(0):x(t)}function g(t){if(t>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|t}function b(t,e){if(o.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||T(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var n=t.length,p=2<arguments.length&&arguments[2]===!0;if(!p&&n===0)return 0;for(var k=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return gt(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return ot(t).length;default:if(k)return p?-1:gt(t).length;e=(""+e).toLowerCase(),k=!0}}function S(t,e,n){var p=!1;if((e===void 0||0>e)&&(e=0),e>this.length||((n===void 0||n>this.length)&&(n=this.length),0>=n)||(n>>>=0,e>>>=0,n<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return yt(this,e,n);case"utf8":case"utf-8":return nt(this,e,n);case"ascii":return j(this,e,n);case"latin1":case"binary":return Jt(this,e,n);case"base64":return $(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return pt(this,e,n);default:if(p)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),p=!0}}function w(t,e,n){var p=t[e];t[e]=t[n],t[n]=p}function A(t,e,n,p,k){if(t.length===0)return-1;if(typeof n=="string"?(p=n,n=0):2147483647<n?n=2147483647:-2147483648>n&&(n=-2147483648),n=+n,I(n)&&(n=k?0:t.length-1),0>n&&(n=t.length+n),n>=t.length){if(k)return-1;n=t.length-1}else if(0>n)if(k)n=0;else return-1;if(typeof e=="string"&&(e=o.from(e,p)),o.isBuffer(e))return e.length===0?-1:B(t,e,n,p,k);if(typeof e=="number")return e&=255,typeof Uint8Array.prototype.indexOf=="function"?k?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):B(t,[e],n,p,k);throw new TypeError("val must be string, number or Buffer")}function B(t,e,n,p,k){function O(zt,Ot){return D===1?zt[Ot]:zt.readUInt16BE(Ot*D)}var D=1,z=t.length,rt=e.length;if(p!==void 0&&(p=(p+"").toLowerCase(),p==="ucs2"||p==="ucs-2"||p==="utf16le"||p==="utf-16le")){if(2>t.length||2>e.length)return-1;D=2,z/=2,rt/=2,n/=2}var G;if(k){var K=-1;for(G=n;G<z;G++)if(O(t,G)!==O(e,K===-1?0:G-K))K!==-1&&(G-=G-K),K=-1;else if(K===-1&&(K=G),G-K+1===rt)return K*D}else for(n+rt>z&&(n=z-rt),G=n;0<=G;G--){for(var Z=!0,xt=0;xt<rt;xt++)if(O(t,G+xt)!==O(e,xt)){Z=!1;break}if(Z)return G}return-1}function _(t,e,n,p){n=+n||0;var k=t.length-n;p?(p=+p,p>k&&(p=k)):p=k;var O=e.length;p>O/2&&(p=O/2);for(var D,z=0;z<p;++z){if(D=parseInt(e.substr(2*z,2),16),I(D))return z;t[n+z]=D}return z}function R(t,e,n,p){return ft(gt(e,t.length-n),t,n,p)}function L(t,e,n,p){return ft(qt(e),t,n,p)}function U(t,e,n,p){return L(t,e,n,p)}function H(t,e,n,p){return ft(ot(e),t,n,p)}function q(t,e,n,p){return ft(Wt(e,t.length-n),t,n,p)}function $(t,e,n){return e===0&&n===t.length?P.fromByteArray(t):P.fromByteArray(t.slice(e,n))}function nt(t,e,n){n=m(t.length,n);for(var p=[],k=e;k<n;){var O=t[k],D=null,z=239<O?4:223<O?3:191<O?2:1;if(k+z<=n){var rt,G,K,Z;z===1?128>O&&(D=O):z===2?(rt=t[k+1],(192&rt)==128&&(Z=(31&O)<<6|63&rt,127<Z&&(D=Z))):z===3?(rt=t[k+1],G=t[k+2],(192&rt)==128&&(192&G)==128&&(Z=(15&O)<<12|(63&rt)<<6|63&G,2047<Z&&(55296>Z||57343<Z)&&(D=Z))):z===4&&(rt=t[k+1],G=t[k+2],K=t[k+3],(192&rt)==128&&(192&G)==128&&(192&K)==128&&(Z=(15&O)<<18|(63&rt)<<12|(63&G)<<6|63&K,65535<Z&&1114112>Z&&(D=Z)))}D===null?(D=65533,z=1):65535<D&&(D-=65536,p.push(55296|1023&D>>>10),D=56320|1023&D),p.push(D),k+=z}return st(p)}function st(t){var e=t.length;if(e<=4096)return c.apply(String,t);for(var n="",p=0;p<e;)n+=c.apply(String,t.slice(p,p+=4096));return n}function j(t,e,n){var p="";n=m(t.length,n);for(var k=e;k<n;++k)p+=c(127&t[k]);return p}function Jt(t,e,n){var p="";n=m(t.length,n);for(var k=e;k<n;++k)p+=c(t[k]);return p}function yt(t,e,n){var p=t.length;(!e||0>e)&&(e=0),(!n||0>n||n>p)&&(n=p);for(var k="",O=e;O<n;++O)k+=Ht(t[O]);return k}function pt(t,e,n){for(var p=t.slice(e,n),k="",O=0;O<p.length;O+=2)k+=c(p[O]+256*p[O+1]);return k}function Q(t,e,n){if(t%1!=0||0>t)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function tt(t,e,n,p,k,O){if(!o.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>k||e<O)throw new RangeError('"value" argument is out of bounds');if(n+p>t.length)throw new RangeError("Index out of range")}function bt(t,e,n,p){if(n+p>t.length)throw new RangeError("Index out of range");if(0>n)throw new RangeError("Index out of range")}function ht(t,e,n,p,k){return e=+e,n>>>=0,k||bt(t,e,n,4,34028234663852886e22,-34028234663852886e22),M.write(t,e,n,p,23,4),n+4}function mt(t,e,n,p,k){return e=+e,n>>>=0,k||bt(t,e,n,8,17976931348623157e292,-17976931348623157e292),M.write(t,e,n,p,52,8),n+8}function Rt(t){if(t=t.split("=")[0],t=t.trim().replace(W,""),2>t.length)return"";for(;t.length%4!=0;)t+="=";return t}function Ht(t){return 16>t?"0"+t.toString(16):t.toString(16)}function gt(t,e){e=e||1/0;for(var n,p=t.length,k=null,O=[],D=0;D<p;++D){if(n=t.charCodeAt(D),55295<n&&57344>n){if(!k){if(56319<n){-1<(e-=3)&&O.push(239,191,189);continue}else if(D+1===p){-1<(e-=3)&&O.push(239,191,189);continue}k=n;continue}if(56320>n){-1<(e-=3)&&O.push(239,191,189),k=n;continue}n=(k-55296<<10|n-56320)+65536}else k&&-1<(e-=3)&&O.push(239,191,189);if(k=null,128>n){if(0>(e-=1))break;O.push(n)}else if(2048>n){if(0>(e-=2))break;O.push(192|n>>6,128|63&n)}else if(65536>n){if(0>(e-=3))break;O.push(224|n>>12,128|63&n>>6,128|63&n)}else if(1114112>n){if(0>(e-=4))break;O.push(240|n>>18,128|63&n>>12,128|63&n>>6,128|63&n)}else throw new Error("Invalid code point")}return O}function qt(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function Wt(t,e){for(var n,p,k,O=[],D=0;D<t.length&&!(0>(e-=2));++D)n=t.charCodeAt(D),p=n>>8,k=n%256,O.push(k),O.push(p);return O}function ot(t){return P.toByteArray(Rt(t))}function ft(t,e,n,p){for(var k=0;k<p&&!(k+n>=e.length||k>=t.length);++k)e[k+n]=t[k];return k}function T(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function I(t){return t!==t}var P=i("base64-js"),M=i("ieee754");f.Buffer=o,f.SlowBuffer=function(t){return+t!=t&&(t=0),o.alloc(+t)},f.INSPECT_MAX_BYTES=50,f.kMaxLength=2147483647,o.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},t.foo()===42}catch{return!1}}(),o.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){return o.isBuffer(this)?this.buffer:void 0}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){return o.isBuffer(this)?this.byteOffset:void 0}}),typeof Symbol<"u"&&Symbol.species!=null&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),o.poolSize=8192,o.from=function(t,e,n){return l(t,e,n)},o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,o.alloc=function(t,e,n){return h(t,e,n)},o.allocUnsafe=function(t){return v(t)},o.allocUnsafeSlow=function(t){return v(t)},o.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==o.prototype},o.compare=function(t,e){if(T(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),T(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(t)||!o.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var n=t.length,p=e.length,k=0,O=m(n,p);k<O;++k)if(t[k]!==e[k]){n=t[k],p=e[k];break}return n<p?-1:p<n?1:0},o.isEncoding=function(t){switch((t+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return o.alloc(0);var n;if(e===void 0)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var p=o.allocUnsafe(e),k=0;for(n=0;n<t.length;++n){var O=t[n];if(T(O,Uint8Array)&&(O=o.from(O)),!o.isBuffer(O))throw new TypeError('"list" argument must be an Array of Buffers');O.copy(p,k),k+=O.length}return p},o.byteLength=b,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)w(this,e,e+1);return this},o.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)w(this,e,e+3),w(this,e+1,e+2);return this},o.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)w(this,e,e+7),w(this,e+1,e+6),w(this,e+2,e+5),w(this,e+3,e+4);return this},o.prototype.toString=function(){var t=this.length;return t===0?"":arguments.length===0?nt(this,0,t):S.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(t){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||o.compare(this,t)===0},o.prototype.inspect=function(){var t="",e=f.INSPECT_MAX_BYTES;return t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(t+=" ... "),"<Buffer "+t+">"},o.prototype.compare=function(t,e,n,p,k){if(T(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(e===void 0&&(e=0),n===void 0&&(n=t?t.length:0),p===void 0&&(p=0),k===void 0&&(k=this.length),0>e||n>t.length||0>p||k>this.length)throw new RangeError("out of range index");if(p>=k&&e>=n)return 0;if(p>=k)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,p>>>=0,k>>>=0,this===t)return 0;for(var O=k-p,D=n-e,z=m(O,D),rt=this.slice(p,k),G=t.slice(e,n),K=0;K<z;++K)if(rt[K]!==G[K]){O=rt[K],D=G[K];break}return O<D?-1:D<O?1:0},o.prototype.includes=function(t,e,n){return this.indexOf(t,e,n)!==-1},o.prototype.indexOf=function(t,e,n){return A(this,t,e,n,!0)},o.prototype.lastIndexOf=function(t,e,n){return A(this,t,e,n,!1)},o.prototype.write=function(t,e,n,p){if(e===void 0)p="utf8",n=this.length,e=0;else if(n===void 0&&typeof e=="string")p=e,n=this.length,e=0;else if(isFinite(e))e>>>=0,isFinite(n)?(n>>>=0,p===void 0&&(p="utf8")):(p=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var k=this.length-e;if((n===void 0||n>k)&&(n=k),0<t.length&&(0>n||0>e)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");p||(p="utf8");for(var O=!1;;)switch(p){case"hex":return _(this,t,e,n);case"utf8":case"utf-8":return R(this,t,e,n);case"ascii":return L(this,t,e,n);case"latin1":case"binary":return U(this,t,e,n);case"base64":return H(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,t,e,n);default:if(O)throw new TypeError("Unknown encoding: "+p);p=(""+p).toLowerCase(),O=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},o.prototype.slice=function(t,e){var n=this.length;t=~~t,e=e===void 0?n:~~e,0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),e<t&&(e=t);var p=this.subarray(t,e);return p.__proto__=o.prototype,p},o.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||Q(t,e,this.length);for(var p=this[t],k=1,O=0;++O<e&&(k*=256);)p+=this[t+O]*k;return p},o.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||Q(t,e,this.length);for(var p=this[t+--e],k=1;0<e&&(k*=256);)p+=this[t+--e]*k;return p},o.prototype.readUInt8=function(t,e){return t>>>=0,e||Q(t,1,this.length),this[t]},o.prototype.readUInt16LE=function(t,e){return t>>>=0,e||Q(t,2,this.length),this[t]|this[t+1]<<8},o.prototype.readUInt16BE=function(t,e){return t>>>=0,e||Q(t,2,this.length),this[t]<<8|this[t+1]},o.prototype.readUInt32LE=function(t,e){return t>>>=0,e||Q(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},o.prototype.readUInt32BE=function(t,e){return t>>>=0,e||Q(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},o.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||Q(t,e,this.length);for(var p=this[t],k=1,O=0;++O<e&&(k*=256);)p+=this[t+O]*k;return k*=128,p>=k&&(p-=s(2,8*e)),p},o.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||Q(t,e,this.length);for(var p=e,k=1,O=this[t+--p];0<p&&(k*=256);)O+=this[t+--p]*k;return k*=128,O>=k&&(O-=s(2,8*e)),O},o.prototype.readInt8=function(t,e){return t>>>=0,e||Q(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},o.prototype.readInt16LE=function(t,e){t>>>=0,e||Q(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(t,e){t>>>=0,e||Q(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(t,e){return t>>>=0,e||Q(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},o.prototype.readInt32BE=function(t,e){return t>>>=0,e||Q(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},o.prototype.readFloatLE=function(t,e){return t>>>=0,e||Q(t,4,this.length),M.read(this,t,!0,23,4)},o.prototype.readFloatBE=function(t,e){return t>>>=0,e||Q(t,4,this.length),M.read(this,t,!1,23,4)},o.prototype.readDoubleLE=function(t,e){return t>>>=0,e||Q(t,8,this.length),M.read(this,t,!0,52,8)},o.prototype.readDoubleBE=function(t,e){return t>>>=0,e||Q(t,8,this.length),M.read(this,t,!1,52,8)},o.prototype.writeUIntLE=function(t,e,n,p){if(t=+t,e>>>=0,n>>>=0,!p){var k=s(2,8*n)-1;tt(this,t,e,n,k,0)}var O=1,D=0;for(this[e]=255&t;++D<n&&(O*=256);)this[e+D]=255&t/O;return e+n},o.prototype.writeUIntBE=function(t,e,n,p){if(t=+t,e>>>=0,n>>>=0,!p){var k=s(2,8*n)-1;tt(this,t,e,n,k,0)}var O=n-1,D=1;for(this[e+O]=255&t;0<=--O&&(D*=256);)this[e+O]=255&t/D;return e+n},o.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||tt(this,t,e,1,255,0),this[e]=255&t,e+1},o.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||tt(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},o.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||tt(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},o.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||tt(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},o.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||tt(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},o.prototype.writeIntLE=function(t,e,n,p){if(t=+t,e>>>=0,!p){var k=s(2,8*n-1);tt(this,t,e,n,k-1,-k)}var O=0,D=1,z=0;for(this[e]=255&t;++O<n&&(D*=256);)0>t&&z===0&&this[e+O-1]!==0&&(z=1),this[e+O]=255&(t/D>>0)-z;return e+n},o.prototype.writeIntBE=function(t,e,n,p){if(t=+t,e>>>=0,!p){var k=s(2,8*n-1);tt(this,t,e,n,k-1,-k)}var O=n-1,D=1,z=0;for(this[e+O]=255&t;0<=--O&&(D*=256);)0>t&&z===0&&this[e+O+1]!==0&&(z=1),this[e+O]=255&(t/D>>0)-z;return e+n},o.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||tt(this,t,e,1,127,-128),0>t&&(t=255+t+1),this[e]=255&t,e+1},o.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||tt(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},o.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||tt(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},o.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||tt(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},o.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||tt(this,t,e,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},o.prototype.writeFloatLE=function(t,e,n){return ht(this,t,e,!0,n)},o.prototype.writeFloatBE=function(t,e,n){return ht(this,t,e,!1,n)},o.prototype.writeDoubleLE=function(t,e,n){return mt(this,t,e,!0,n)},o.prototype.writeDoubleBE=function(t,e,n){return mt(this,t,e,!1,n)},o.prototype.copy=function(t,e,n,p){if(!o.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),p||p===0||(p=this.length),e>=t.length&&(e=t.length),e||(e=0),0<p&&p<n&&(p=n),p===n||t.length===0||this.length===0)return 0;if(0>e)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("Index out of range");if(0>p)throw new RangeError("sourceEnd out of bounds");p>this.length&&(p=this.length),t.length-e<p-n&&(p=t.length-e+n);var k=p-n;if(this===t&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(e,n,p);else if(this===t&&n<e&&e<p)for(var O=k-1;0<=O;--O)t[O+e]=this[O+n];else Uint8Array.prototype.set.call(t,this.subarray(n,p),e);return k},o.prototype.fill=function(t,e,n,p){if(typeof t=="string"){if(typeof e=="string"?(p=e,e=0,n=this.length):typeof n=="string"&&(p=n,n=this.length),p!==void 0&&typeof p!="string")throw new TypeError("encoding must be a string");if(typeof p=="string"&&!o.isEncoding(p))throw new TypeError("Unknown encoding: "+p);if(t.length===1){var k=t.charCodeAt(0);(p==="utf8"&&128>k||p==="latin1")&&(t=k)}}else typeof t=="number"&&(t&=255);if(0>e||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;e>>>=0,n=n===void 0?this.length:n>>>0,t||(t=0);var O;if(typeof t=="number")for(O=e;O<n;++O)this[O]=t;else{var D=o.isBuffer(t)?t:o.from(t,p),z=D.length;if(z===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(O=0;O<n-e;++O)this[O+e]=D[O%z]}return this};var W=/[^+/0-9A-Za-z-_]/g}).call(this)}).call(this,i("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:9}],4:[function(i,d,f){(function(c){(function(){function m(){let o;try{o=f.storage.getItem("debug")}catch{}return!o&&typeof c<"u"&&"env"in c&&(o=c.env.DEBUG),o}f.formatArgs=function(o){if(o[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+o[0]+(this.useColors?"%c ":" ")+"+"+d.exports.humanize(this.diff),!this.useColors)return;let l="color: "+this.color;o.splice(1,0,l,"color: inherit");let y=0,h=0;o[0].replace(/%[a-zA-Z%]/g,v=>{v==="%%"||(y++,v==="%c"&&(h=y))}),o.splice(h,0,l)},f.save=function(o){try{o?f.storage.setItem("debug",o):f.storage.removeItem("debug")}catch{}},f.load=m,f.useColors=function(){return!!(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))||!(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},f.storage=function(){try{return localStorage}catch{}}(),f.destroy=(()=>{let o=!1;return()=>{o||(o=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),f.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],f.log=console.debug||console.log||(()=>{}),d.exports=i("./common")(f);let{formatters:C}=d.exports;C.j=function(o){try{return JSON.stringify(o)}catch(l){return"[UnexpectedJSONParseError]: "+l.message}}}).call(this)}).call(this,i("_process"))},{"./common":5,_process:12}],5:[function(i,d){d.exports=function(f){function c(o){function l(...v){if(!l.enabled)return;let E=l,x=+new Date,N=x-(y||x);E.diff=N,E.prev=y,E.curr=x,y=x,v[0]=c.coerce(v[0]),typeof v[0]!="string"&&v.unshift("%O");let u=0;v[0]=v[0].replace(/%([a-zA-Z%])/g,(b,S)=>{if(b==="%%")return"%";u++;let w=c.formatters[S];if(typeof w=="function"){let A=v[u];b=w.call(E,A),v.splice(u,1),u--}return b}),c.formatArgs.call(E,v),(E.log||c.log).apply(E,v)}let y,h=null;return l.namespace=o,l.useColors=c.useColors(),l.color=c.selectColor(o),l.extend=m,l.destroy=c.destroy,Object.defineProperty(l,"enabled",{enumerable:!0,configurable:!1,get:()=>h===null?c.enabled(o):h,set:v=>{h=v}}),typeof c.init=="function"&&c.init(l),l}function m(o,l){let y=c(this.namespace+(typeof l>"u"?":":l)+o);return y.log=this.log,y}function C(o){return o.toString().substring(2,o.toString().length-2).replace(/\.\*\?$/,"*")}return c.debug=c,c.default=c,c.coerce=function(o){return o instanceof Error?o.stack||o.message:o},c.disable=function(){let o=[...c.names.map(C),...c.skips.map(C).map(l=>"-"+l)].join(",");return c.enable(""),o},c.enable=function(o){c.save(o),c.names=[],c.skips=[];let l,y=(typeof o=="string"?o:"").split(/[\s,]+/),h=y.length;for(l=0;l<h;l++)y[l]&&(o=y[l].replace(/\*/g,".*?"),o[0]==="-"?c.skips.push(new RegExp("^"+o.substr(1)+"$")):c.names.push(new RegExp("^"+o+"$")))},c.enabled=function(o){if(o[o.length-1]==="*")return!0;let l,y;for(l=0,y=c.skips.length;l<y;l++)if(c.skips[l].test(o))return!1;for(l=0,y=c.names.length;l<y;l++)if(c.names[l].test(o))return!0;return!1},c.humanize=i("ms"),c.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(f).forEach(o=>{c[o]=f[o]}),c.names=[],c.skips=[],c.formatters={},c.selectColor=function(o){let l=0;for(let y=0;y<o.length;y++)l=(l<<5)-l+o.charCodeAt(y),l|=0;return c.colors[r(l)%c.colors.length]},c.enable(c.load()),c}},{ms:11}],6:[function(i,d){"use strict";function f(c,m){for(let C in m)Object.defineProperty(c,C,{value:m[C],enumerable:!0,configurable:!0});return c}d.exports=function(c,m,C){if(!c||typeof c=="string")throw new TypeError("Please pass an Error to err-code");C||(C={}),typeof m=="object"&&(C=m,m=""),m&&(C.code=m);try{return f(c,C)}catch{C.message=c.message,C.stack=c.stack;let l=function(){};return l.prototype=Object.create(Object.getPrototypeOf(c)),f(new l,C)}}},{}],7:[function(i,d){"use strict";function f(_){console&&console.warn&&console.warn(_)}function c(){c.init.call(this)}function m(_){if(typeof _!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof _)}function C(_){return _._maxListeners===void 0?c.defaultMaxListeners:_._maxListeners}function o(_,R,L,U){var H,q,$;if(m(L),q=_._events,q===void 0?(q=_._events=Object.create(null),_._eventsCount=0):(q.newListener!==void 0&&(_.emit("newListener",R,L.listener?L.listener:L),q=_._events),$=q[R]),$===void 0)$=q[R]=L,++_._eventsCount;else if(typeof $=="function"?$=q[R]=U?[L,$]:[$,L]:U?$.unshift(L):$.push(L),H=C(_),0<H&&$.length>H&&!$.warned){$.warned=!0;var nt=new Error("Possible EventEmitter memory leak detected. "+$.length+" "+(R+" listeners added. Use emitter.setMaxListeners() to increase limit"));nt.name="MaxListenersExceededWarning",nt.emitter=_,nt.type=R,nt.count=$.length,f(nt)}return _}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function y(_,R,L){var U={fired:!1,wrapFn:void 0,target:_,type:R,listener:L},H=l.bind(U);return H.listener=L,U.wrapFn=H,H}function h(_,R,L){var U=_._events;if(U===void 0)return[];var H=U[R];return H===void 0?[]:typeof H=="function"?L?[H.listener||H]:[H]:L?N(H):E(H,H.length)}function v(_){var R=this._events;if(R!==void 0){var L=R[_];if(typeof L=="function")return 1;if(L!==void 0)return L.length}return 0}function E(_,R){for(var L=Array(R),U=0;U<R;++U)L[U]=_[U];return L}function x(_,R){for(;R+1<_.length;R++)_[R]=_[R+1];_.pop()}function N(_){for(var R=Array(_.length),L=0;L<R.length;++L)R[L]=_[L].listener||_[L];return R}function u(_,R,L){typeof _.on=="function"&&g(_,"error",R,L)}function g(_,R,L,U){if(typeof _.on=="function")U.once?_.once(R,L):_.on(R,L);else if(typeof _.addEventListener=="function")_.addEventListener(R,function H(q){U.once&&_.removeEventListener(R,H),L(q)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof _)}var b,S=typeof Reflect=="object"?Reflect:null,w=S&&typeof S.apply=="function"?S.apply:function(_,R,L){return Function.prototype.apply.call(_,R,L)};b=S&&typeof S.ownKeys=="function"?S.ownKeys:Object.getOwnPropertySymbols?function(_){return Object.getOwnPropertyNames(_).concat(Object.getOwnPropertySymbols(_))}:function(_){return Object.getOwnPropertyNames(_)};var A=Number.isNaN||function(_){return _!==_};d.exports=c,d.exports.once=function(_,R){return new Promise(function(L,U){function H($){_.removeListener(R,q),U($)}function q(){typeof _.removeListener=="function"&&_.removeListener("error",H),L([].slice.call(arguments))}g(_,R,q,{once:!0}),R!=="error"&&u(_,H,{once:!0})})},c.EventEmitter=c,c.prototype._events=void 0,c.prototype._eventsCount=0,c.prototype._maxListeners=void 0;var B=10;Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:function(){return B},set:function(_){if(typeof _!="number"||0>_||A(_))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+_+".");B=_}}),c.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},c.prototype.setMaxListeners=function(_){if(typeof _!="number"||0>_||A(_))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+_+".");return this._maxListeners=_,this},c.prototype.getMaxListeners=function(){return C(this)},c.prototype.emit=function(_){for(var R=[],L=1;L<arguments.length;L++)R.push(arguments[L]);var U=_==="error",H=this._events;if(H!==void 0)U=U&&H.error===void 0;else if(!U)return!1;if(U){var q;if(0<R.length&&(q=R[0]),q instanceof Error)throw q;var $=new Error("Unhandled error."+(q?" ("+q.message+")":""));throw $.context=q,$}var nt=H[_];if(nt===void 0)return!1;if(typeof nt=="function")w(nt,this,R);else for(var st=nt.length,j=E(nt,st),L=0;L<st;++L)w(j[L],this,R);return!0},c.prototype.addListener=function(_,R){return o(this,_,R,!1)},c.prototype.on=c.prototype.addListener,c.prototype.prependListener=function(_,R){return o(this,_,R,!0)},c.prototype.once=function(_,R){return m(R),this.on(_,y(this,_,R)),this},c.prototype.prependOnceListener=function(_,R){return m(R),this.prependListener(_,y(this,_,R)),this},c.prototype.removeListener=function(_,R){var L,U,H,q,$;if(m(R),U=this._events,U===void 0)return this;if(L=U[_],L===void 0)return this;if(L===R||L.listener===R)--this._eventsCount==0?this._events=Object.create(null):(delete U[_],U.removeListener&&this.emit("removeListener",_,L.listener||R));else if(typeof L!="function"){for(H=-1,q=L.length-1;0<=q;q--)if(L[q]===R||L[q].listener===R){$=L[q].listener,H=q;break}if(0>H)return this;H===0?L.shift():x(L,H),L.length===1&&(U[_]=L[0]),U.removeListener!==void 0&&this.emit("removeListener",_,$||R)}return this},c.prototype.off=c.prototype.removeListener,c.prototype.removeAllListeners=function(_){var R,L,U;if(L=this._events,L===void 0)return this;if(L.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):L[_]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete L[_]),this;if(arguments.length===0){var H,q=Object.keys(L);for(U=0;U<q.length;++U)H=q[U],H!=="removeListener"&&this.removeAllListeners(H);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(R=L[_],typeof R=="function")this.removeListener(_,R);else if(R!==void 0)for(U=R.length-1;0<=U;U--)this.removeListener(_,R[U]);return this},c.prototype.listeners=function(_){return h(this,_,!0)},c.prototype.rawListeners=function(_){return h(this,_,!1)},c.listenerCount=function(_,R){return typeof _.listenerCount=="function"?_.listenerCount(R):v.call(_,R)},c.prototype.listenerCount=v,c.prototype.eventNames=function(){return 0<this._eventsCount?b(this._events):[]}},{}],8:[function(i,d){d.exports=function(){if(typeof globalThis>"u")return null;var f={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return f.RTCPeerConnection?f:null}},{}],9:[function(i,d,f){f.read=function(c,m,C,o,l){var y,h,v=8*l-o-1,E=(1<<v)-1,x=E>>1,N=-7,u=C?l-1:0,g=C?-1:1,b=c[m+u];for(u+=g,y=b&(1<<-N)-1,b>>=-N,N+=v;0<N;y=256*y+c[m+u],u+=g,N-=8);for(h=y&(1<<-N)-1,y>>=-N,N+=o;0<N;h=256*h+c[m+u],u+=g,N-=8);if(y===0)y=1-x;else{if(y===E)return h?NaN:(b?-1:1)*(1/0);h+=s(2,o),y-=x}return(b?-1:1)*h*s(2,y-o)},f.write=function(c,m,C,o,l,y){var h,v,E,x=Math.LN2,N=Math.log,u=8*y-l-1,g=(1<<u)-1,b=g>>1,S=l===23?s(2,-24)-s(2,-77):0,w=o?0:y-1,A=o?1:-1,B=0>m||m===0&&0>1/m?1:0;for(m=r(m),isNaN(m)||m===1/0?(v=isNaN(m)?1:0,h=g):(h=a(N(m)/x),1>m*(E=s(2,-h))&&(h--,E*=2),m+=1<=h+b?S/E:S*s(2,1-b),2<=m*E&&(h++,E/=2),h+b>=g?(v=0,h=g):1<=h+b?(v=(m*E-1)*s(2,l),h+=b):(v=m*s(2,b-1)*s(2,l),h=0));8<=l;c[C+w]=255&v,w+=A,v/=256,l-=8);for(h=h<<l|v,u+=l;0<u;c[C+w]=255&h,w+=A,h/=256,u-=8);c[C+w-A]|=128*B}},{}],10:[function(i,d){d.exports=typeof Object.create=="function"?function(f,c){c&&(f.super_=c,f.prototype=Object.create(c.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}))}:function(f,c){if(c){f.super_=c;var m=function(){};m.prototype=c.prototype,f.prototype=new m,f.prototype.constructor=f}}},{}],11:[function(i,d){var f=Math.round;function c(y){if(y+="",!(100<y.length)){var h=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(y);if(h){var v=parseFloat(h[1]),E=(h[2]||"ms").toLowerCase();return E==="years"||E==="year"||E==="yrs"||E==="yr"||E==="y"?315576e5*v:E==="weeks"||E==="week"||E==="w"?6048e5*v:E==="days"||E==="day"||E==="d"?864e5*v:E==="hours"||E==="hour"||E==="hrs"||E==="hr"||E==="h"?36e5*v:E==="minutes"||E==="minute"||E==="mins"||E==="min"||E==="m"?6e4*v:E==="seconds"||E==="second"||E==="secs"||E==="sec"||E==="s"?1e3*v:E==="milliseconds"||E==="millisecond"||E==="msecs"||E==="msec"||E==="ms"?v:void 0}}}function m(y){var h=r(y);return 864e5<=h?f(y/864e5)+"d":36e5<=h?f(y/36e5)+"h":6e4<=h?f(y/6e4)+"m":1e3<=h?f(y/1e3)+"s":y+"ms"}function C(y){var h=r(y);return 864e5<=h?o(y,h,864e5,"day"):36e5<=h?o(y,h,36e5,"hour"):6e4<=h?o(y,h,6e4,"minute"):1e3<=h?o(y,h,1e3,"second"):y+" ms"}function o(y,h,v,E){return f(y/v)+" "+E+(h>=1.5*v?"s":"")}var l=24*(60*6e4);d.exports=function(y,h){h=h||{};var v=typeof y;if(v=="string"&&0<y.length)return c(y);if(v==="number"&&isFinite(y))return h.long?C(y):m(y);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(y))}},{}],12:[function(i,d){function f(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}function m(S){if(v===setTimeout)return setTimeout(S,0);if((v===f||!v)&&setTimeout)return v=setTimeout,setTimeout(S,0);try{return v(S,0)}catch{try{return v.call(null,S,0)}catch{return v.call(this,S,0)}}}function C(S){if(E===clearTimeout)return clearTimeout(S);if((E===c||!E)&&clearTimeout)return E=clearTimeout,clearTimeout(S);try{return E(S)}catch{try{return E.call(null,S)}catch{return E.call(this,S)}}}function o(){g&&N&&(g=!1,N.length?u=N.concat(u):b=-1,u.length&&l())}function l(){if(!g){var S=m(o);g=!0;for(var w=u.length;w;){for(N=u,u=[];++b<w;)N&&N[b].run();b=-1,w=u.length}N=null,g=!1,C(S)}}function y(S,w){this.fun=S,this.array=w}function h(){}var v,E,x=d.exports={};(function(){try{v=typeof setTimeout=="function"?setTimeout:f}catch{v=f}try{E=typeof clearTimeout=="function"?clearTimeout:c}catch{E=c}})();var N,u=[],g=!1,b=-1;x.nextTick=function(S){var w=Array(arguments.length-1);if(1<arguments.length)for(var A=1;A<arguments.length;A++)w[A-1]=arguments[A];u.push(new y(S,w)),u.length!==1||g||m(l)},y.prototype.run=function(){this.fun.apply(null,this.array)},x.title="browser",x.browser=!0,x.env={},x.argv=[],x.version="",x.versions={},x.on=h,x.addListener=h,x.once=h,x.off=h,x.removeListener=h,x.removeAllListeners=h,x.emit=h,x.prependListener=h,x.prependOnceListener=h,x.listeners=function(){return[]},x.binding=function(){throw new Error("process.binding is not supported")},x.cwd=function(){return"/"},x.chdir=function(){throw new Error("process.chdir is not supported")},x.umask=function(){return 0}},{}],13:[function(i,d){(function(f){(function(){let c;d.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window>"u"?f:window):m=>(c||(c=Promise.resolve())).then(m).catch(C=>setTimeout(()=>{throw C},0))}).call(this)}).call(this,typeof global>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:global)},{}],14:[function(i,d){(function(f,c){(function(){"use strict";var m=i("safe-buffer").Buffer,C=c.crypto||c.msCrypto;d.exports=C&&C.getRandomValues?function(o,l){if(o>4294967295)throw new RangeError("requested too many random bytes");var y=m.allocUnsafe(o);if(0<o)if(65536<o)for(var h=0;h<o;h+=65536)C.getRandomValues(y.slice(h,h+65536));else C.getRandomValues(y);return typeof l=="function"?f.nextTick(function(){l(null,y)}):y}:function(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}}).call(this)}).call(this,i("_process"),typeof global>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:global)},{_process:12,"safe-buffer":30}],15:[function(i,d){"use strict";function f(h,v){h.prototype=Object.create(v.prototype),h.prototype.constructor=h,h.__proto__=v}function c(h,v,E){function x(u,g,b){return typeof v=="string"?v:v(u,g,b)}E||(E=Error);var N=function(u){function g(b,S,w){return u.call(this,x(b,S,w))||this}return f(g,u),g}(E);N.prototype.name=E.name,N.prototype.code=h,y[h]=N}function m(h,v){if(Array.isArray(h)){var E=h.length;return h=h.map(function(x){return x+""}),2<E?"one of ".concat(v," ").concat(h.slice(0,E-1).join(", "),", or ")+h[E-1]:E===2?"one of ".concat(v," ").concat(h[0]," or ").concat(h[1]):"of ".concat(v," ").concat(h[0])}return"of ".concat(v," ").concat(h+"")}function C(h,v,E){return h.substr(!E||0>E?0:+E,v.length)===v}function o(h,v,E){return(E===void 0||E>h.length)&&(E=h.length),h.substring(E-v.length,E)===v}function l(h,v,E){return typeof E!="number"&&(E=0),!(E+v.length>h.length)&&h.indexOf(v,E)!==-1}var y={};c("ERR_INVALID_OPT_VALUE",function(h,v){return'The value "'+v+'" is invalid for option "'+h+'"'},TypeError),c("ERR_INVALID_ARG_TYPE",function(h,v,E){var x;typeof v=="string"&&C(v,"not ")?(x="must not be",v=v.replace(/^not /,"")):x="must be";var N;if(o(h," argument"))N="The ".concat(h," ").concat(x," ").concat(m(v,"type"));else{var u=l(h,".")?"property":"argument";N='The "'.concat(h,'" ').concat(u," ").concat(x," ").concat(m(v,"type"))}return N+=". Received type ".concat(typeof E),N},TypeError),c("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),c("ERR_METHOD_NOT_IMPLEMENTED",function(h){return"The "+h+" method is not implemented"}),c("ERR_STREAM_PREMATURE_CLOSE","Premature close"),c("ERR_STREAM_DESTROYED",function(h){return"Cannot call "+h+" after a stream was destroyed"}),c("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),c("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),c("ERR_STREAM_WRITE_AFTER_END","write after end"),c("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),c("ERR_UNKNOWN_ENCODING",function(h){return"Unknown encoding: "+h},TypeError),c("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),d.exports.codes=y},{}],16:[function(i,d){(function(f){(function(){"use strict";function c(x){return this instanceof c?(l.call(this,x),y.call(this,x),this.allowHalfOpen=!0,void(x&&(x.readable===!1&&(this.readable=!1),x.writable===!1&&(this.writable=!1),x.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",m))))):new c(x)}function m(){this._writableState.ended||f.nextTick(C,this)}function C(x){x.end()}var o=Object.keys||function(x){var N=[];for(var u in x)N.push(u);return N};d.exports=c;var l=i("./_stream_readable"),y=i("./_stream_writable");i("inherits")(c,l);for(var h,v=o(y.prototype),E=0;E<v.length;E++)h=v[E],c.prototype[h]||(c.prototype[h]=y.prototype[h]);Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(x){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=x,this._writableState.destroyed=x)}})}).call(this)}).call(this,i("_process"))},{"./_stream_readable":18,"./_stream_writable":20,_process:12,inherits:10}],17:[function(i,d){"use strict";function f(m){return this instanceof f?void c.call(this,m):new f(m)}d.exports=f;var c=i("./_stream_transform");i("inherits")(f,c),f.prototype._transform=function(m,C,o){o(null,m)}},{"./_stream_transform":19,inherits:10}],18:[function(i,d){(function(f,c){(function(){"use strict";function m(t){return Q.from(t)}function C(t){return Q.isBuffer(t)||t instanceof tt}function o(t,e,n){return typeof t.prependListener=="function"?t.prependListener(e,n):void(t._events&&t._events[e]?Array.isArray(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n))}function l(t,e,n){st=st||i("./_stream_duplex"),t=t||{},typeof n!="boolean"&&(n=e instanceof st),this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=Wt(this,t,"readableHighWaterMark",n),this.buffer=new Ht,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(!ht&&(ht=i("string_decoder/").StringDecoder),this.decoder=new ht(t.encoding),this.encoding=t.encoding)}function y(t){if(st=st||i("./_stream_duplex"),!(this instanceof y))return new y(t);var e=this instanceof st;this._readableState=new l(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),pt.call(this)}function h(t,e,n,p,k){j("readableAddChunk",e);var O=t._readableState;if(e===null)O.reading=!1,u(t,O);else{var D;if(k||(D=E(O,e)),D)M(t,D);else if(!(O.objectMode||e&&0<e.length))p||(O.reading=!1,S(t,O));else if(typeof e=="string"||O.objectMode||Object.getPrototypeOf(e)===Q.prototype||(e=m(e)),p)O.endEmitted?M(t,new P):v(t,O,e,!0);else if(O.ended)M(t,new T);else{if(O.destroyed)return!1;O.reading=!1,O.decoder&&!n?(e=O.decoder.write(e),O.objectMode||e.length!==0?v(t,O,e,!1):S(t,O)):v(t,O,e,!1)}}return!O.ended&&(O.length<O.highWaterMark||O.length===0)}function v(t,e,n,p){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",n)):(e.length+=e.objectMode?1:n.length,p?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&g(t)),S(t,e)}function E(t,e){var n;return C(e)||typeof e=="string"||e===void 0||t.objectMode||(n=new ft("chunk",["string","Buffer","Uint8Array"],e)),n}function x(t){return 1073741824<=t?t=1073741824:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function N(t,e){return 0>=t||e.length===0&&e.ended?0:e.objectMode?1:t===t?(t>e.highWaterMark&&(e.highWaterMark=x(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0)):e.flowing&&e.length?e.buffer.head.data.length:e.length}function u(t,e){if(j("onEofChunk"),!e.ended){if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,e.sync?g(t):(e.needReadable=!1,!e.emittedReadable&&(e.emittedReadable=!0,b(t)))}}function g(t){var e=t._readableState;j("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(j("emitReadable",e.flowing),e.emittedReadable=!0,f.nextTick(b,t))}function b(t){var e=t._readableState;j("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,U(t)}function S(t,e){e.readingMore||(e.readingMore=!0,f.nextTick(w,t,e))}function w(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var n=e.length;if(j("maybeReadMore read 0"),t.read(0),n===e.length)break}e.readingMore=!1}function A(t){return function(){var e=t._readableState;j("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,e.awaitDrain===0&&yt(t,"data")&&(e.flowing=!0,U(t))}}function B(t){var e=t._readableState;e.readableListening=0<t.listenerCount("readable"),e.resumeScheduled&&!e.paused?e.flowing=!0:0<t.listenerCount("data")&&t.resume()}function _(t){j("readable nexttick read 0"),t.read(0)}function R(t,e){e.resumeScheduled||(e.resumeScheduled=!0,f.nextTick(L,t,e))}function L(t,e){j("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),U(t),e.flowing&&!e.reading&&t.read(0)}function U(t){var e=t._readableState;for(j("flow",e.flowing);e.flowing&&t.read()!==null;);}function H(t,e){if(e.length===0)return null;var n;return e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):e.buffer.length===1?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):n=e.buffer.consume(t,e.decoder),n}function q(t){var e=t._readableState;j("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,f.nextTick($,e,t))}function $(t,e){if(j("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var n=e._writableState;(!n||n.autoDestroy&&n.finished)&&e.destroy()}}function nt(t,e){for(var n=0,p=t.length;n<p;n++)if(t[n]===e)return n;return-1}d.exports=y;var st;y.ReadableState=l;var j,Jt=i("events").EventEmitter,yt=function(t,e){return t.listeners(e).length},pt=i("./internal/streams/stream"),Q=i("buffer").Buffer,tt=c.Uint8Array||function(){},bt=i("util");j=bt&&bt.debuglog?bt.debuglog("stream"):function(){};var ht,mt,Rt,Ht=i("./internal/streams/buffer_list"),gt=i("./internal/streams/destroy"),qt=i("./internal/streams/state"),Wt=qt.getHighWaterMark,ot=i("../errors").codes,ft=ot.ERR_INVALID_ARG_TYPE,T=ot.ERR_STREAM_PUSH_AFTER_EOF,I=ot.ERR_METHOD_NOT_IMPLEMENTED,P=ot.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;i("inherits")(y,pt);var M=gt.errorOrDestroy,W=["error","close","destroy","pause","resume"];Object.defineProperty(y.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),y.prototype.destroy=gt.destroy,y.prototype._undestroy=gt.undestroy,y.prototype._destroy=function(t,e){e(t)},y.prototype.push=function(t,e){var n,p=this._readableState;return p.objectMode?n=!0:typeof t=="string"&&(e=e||p.defaultEncoding,e!==p.encoding&&(t=Q.from(t,e),e=""),n=!0),h(this,t,e,!1,n)},y.prototype.unshift=function(t){return h(this,t,null,!0,!1)},y.prototype.isPaused=function(){return this._readableState.flowing===!1},y.prototype.setEncoding=function(t){ht||(ht=i("string_decoder/").StringDecoder);var e=new ht(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,p="";n!==null;)p+=e.write(n.data),n=n.next;return this._readableState.buffer.clear(),p!==""&&this._readableState.buffer.push(p),this._readableState.length=p.length,this},y.prototype.read=function(t){j("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark===0?0<e.length:e.length>=e.highWaterMark)||e.ended))return j("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?q(this):g(this),null;if(t=N(t,e),t===0&&e.ended)return e.length===0&&q(this),null;var p=e.needReadable;j("need readable",p),(e.length===0||e.length-t<e.highWaterMark)&&(p=!0,j("length less than watermark",p)),e.ended||e.reading?(p=!1,j("reading or ended",p)):p&&(j("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,!e.reading&&(t=N(n,e)));var k;return k=0<t?H(t,e):null,k===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(!e.ended&&(e.needReadable=!0),n!==t&&e.ended&&q(this)),k!==null&&this.emit("data",k),k},y.prototype._read=function(){M(this,new I("_read()"))},y.prototype.pipe=function(t,e){function n(It,Nt){j("onunpipe"),It===K&&Nt&&Nt.hasUnpiped===!1&&(Nt.hasUnpiped=!0,k())}function p(){j("onend"),t.end()}function k(){j("cleanup"),t.removeListener("close",z),t.removeListener("finish",rt),t.removeListener("drain",Ot),t.removeListener("error",D),t.removeListener("unpipe",n),K.removeListener("end",p),K.removeListener("end",G),K.removeListener("data",O),me=!0,Z.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&Ot()}function O(It){j("ondata");var Nt=t.write(It);j("dest.write",Nt),Nt===!1&&((Z.pipesCount===1&&Z.pipes===t||1<Z.pipesCount&&nt(Z.pipes,t)!==-1)&&!me&&(j("false write response, pause",Z.awaitDrain),Z.awaitDrain++),K.pause())}function D(It){j("onerror",It),G(),t.removeListener("error",D),yt(t,"error")===0&&M(t,It)}function z(){t.removeListener("finish",rt),G()}function rt(){j("onfinish"),t.removeListener("close",z),G()}function G(){j("unpipe"),K.unpipe(t)}var K=this,Z=this._readableState;switch(Z.pipesCount){case 0:Z.pipes=t;break;case 1:Z.pipes=[Z.pipes,t];break;default:Z.pipes.push(t)}Z.pipesCount+=1,j("pipe count=%d opts=%j",Z.pipesCount,e);var xt=(!e||e.end!==!1)&&t!==f.stdout&&t!==f.stderr,zt=xt?p:G;Z.endEmitted?f.nextTick(zt):K.once("end",zt),t.on("unpipe",n);var Ot=A(K);t.on("drain",Ot);var me=!1;return K.on("data",O),o(t,"error",D),t.once("close",z),t.once("finish",rt),t.emit("pipe",K),Z.flowing||(j("pipe resume"),K.resume()),t},y.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n),this);if(!t){var p=e.pipes,k=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var O=0;O<k;O++)p[O].emit("unpipe",this,{hasUnpiped:!1});return this}var D=nt(e.pipes,t);return D===-1?this:(e.pipes.splice(D,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n),this)},y.prototype.on=function(t,e){var n=pt.prototype.on.call(this,t,e),p=this._readableState;return t==="data"?(p.readableListening=0<this.listenerCount("readable"),p.flowing!==!1&&this.resume()):t=="readable"&&!p.endEmitted&&!p.readableListening&&(p.readableListening=p.needReadable=!0,p.flowing=!1,p.emittedReadable=!1,j("on readable",p.length,p.reading),p.length?g(this):!p.reading&&f.nextTick(_,this)),n},y.prototype.addListener=y.prototype.on,y.prototype.removeListener=function(t,e){var n=pt.prototype.removeListener.call(this,t,e);return t==="readable"&&f.nextTick(B,this),n},y.prototype.removeAllListeners=function(t){var e=pt.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&f.nextTick(B,this),e},y.prototype.resume=function(){var t=this._readableState;return t.flowing||(j("resume"),t.flowing=!t.readableListening,R(this,t)),t.paused=!1,this},y.prototype.pause=function(){return j("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(j("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},y.prototype.wrap=function(t){var e=this,n=this._readableState,p=!1;for(var k in t.on("end",function(){if(j("wrapped end"),n.decoder&&!n.ended){var D=n.decoder.end();D&&D.length&&e.push(D)}e.push(null)}),t.on("data",function(D){if(j("wrapped data"),n.decoder&&(D=n.decoder.write(D)),!(n.objectMode&&D==null)&&(n.objectMode||D&&D.length)){var z=e.push(D);z||(p=!0,t.pause())}}),t)this[k]===void 0&&typeof t[k]=="function"&&(this[k]=function(D){return function(){return t[D].apply(t,arguments)}}(k));for(var O=0;O<W.length;O++)t.on(W[O],this.emit.bind(this,W[O]));return this._read=function(D){j("wrapped _read",D),p&&(p=!1,t.resume())},this},typeof Symbol=="function"&&(y.prototype[Symbol.asyncIterator]=function(){return mt===void 0&&(mt=i("./internal/streams/async_iterator")),mt(this)}),Object.defineProperty(y.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(y.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(y.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),y._fromList=H,Object.defineProperty(y.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(y.from=function(t,e){return Rt===void 0&&(Rt=i("./internal/streams/from")),Rt(y,t,e)})}).call(this)}).call(this,i("_process"),typeof global>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:global)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/async_iterator":21,"./internal/streams/buffer_list":22,"./internal/streams/destroy":23,"./internal/streams/from":25,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,events:7,inherits:10,"string_decoder/":31,util:2}],19:[function(i,d){"use strict";function f(x,N){var u=this._transformState;u.transforming=!1;var g=u.writecb;if(g===null)return this.emit("error",new y);u.writechunk=null,u.writecb=null,N!=null&&this.push(N),g(x);var b=this._readableState;b.reading=!1,(b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark)}function c(x){return this instanceof c?(E.call(this,x),this._transformState={afterTransform:f.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,x&&(typeof x.transform=="function"&&(this._transform=x.transform),typeof x.flush=="function"&&(this._flush=x.flush)),void this.on("prefinish",m)):new c(x)}function m(){var x=this;typeof this._flush!="function"||this._readableState.destroyed?C(this,null,null):this._flush(function(N,u){C(x,N,u)})}function C(x,N,u){if(N)return x.emit("error",N);if(u!=null&&x.push(u),x._writableState.length)throw new v;if(x._transformState.transforming)throw new h;return x.push(null)}d.exports=c;var o=i("../errors").codes,l=o.ERR_METHOD_NOT_IMPLEMENTED,y=o.ERR_MULTIPLE_CALLBACK,h=o.ERR_TRANSFORM_ALREADY_TRANSFORMING,v=o.ERR_TRANSFORM_WITH_LENGTH_0,E=i("./_stream_duplex");i("inherits")(c,E),c.prototype.push=function(x,N){return this._transformState.needTransform=!1,E.prototype.push.call(this,x,N)},c.prototype._transform=function(x,N,u){u(new l("_transform()"))},c.prototype._write=function(x,N,u){var g=this._transformState;if(g.writecb=u,g.writechunk=x,g.writeencoding=N,!g.transforming){var b=this._readableState;(g.needTransform||b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark)}},c.prototype._read=function(){var x=this._transformState;x.writechunk===null||x.transforming?x.needTransform=!0:(x.transforming=!0,this._transform(x.writechunk,x.writeencoding,x.afterTransform))},c.prototype._destroy=function(x,N){E.prototype._destroy.call(this,x,function(u){N(u)})}},{"../errors":15,"./_stream_duplex":16,inherits:10}],20:[function(i,d){(function(f,c){(function(){"use strict";function m(T){var I=this;this.next=null,this.entry=null,this.finish=function(){q(I,T)}}function C(T){return j.from(T)}function o(T){return j.isBuffer(T)||T instanceof Jt}function l(){}function y(T,I,P){$=$||i("./_stream_duplex"),T=T||{},typeof P!="boolean"&&(P=I instanceof $),this.objectMode=!!T.objectMode,P&&(this.objectMode=this.objectMode||!!T.writableObjectMode),this.highWaterMark=Q(this,T,"writableHighWaterMark",P),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var M=T.decodeStrings===!1;this.decodeStrings=!M,this.defaultEncoding=T.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(W){S(I,W)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=T.emitClose!==!1,this.autoDestroy=!!T.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new m(this)}function h(T){$=$||i("./_stream_duplex");var I=this instanceof $;return I||ft.call(h,this)?(this._writableState=new y(T,this,I),this.writable=!0,T&&(typeof T.write=="function"&&(this._write=T.write),typeof T.writev=="function"&&(this._writev=T.writev),typeof T.destroy=="function"&&(this._destroy=T.destroy),typeof T.final=="function"&&(this._final=T.final)),void st.call(this)):new h(T)}function v(T,I){var P=new qt;ot(T,P),f.nextTick(I,P)}function E(T,I,P,M){var W;return P===null?W=new gt:typeof P!="string"&&!I.objectMode&&(W=new bt("chunk",["string","Buffer"],P)),!W||(ot(T,W),f.nextTick(M,W),!1)}function x(T,I,P){return T.objectMode||T.decodeStrings===!1||typeof I!="string"||(I=j.from(I,P)),I}function N(T,I,P,M,W,t){if(!P){var e=x(I,M,W);M!==e&&(P=!0,W="buffer",M=e)}var n=I.objectMode?1:M.length;I.length+=n;var p=I.length<I.highWaterMark;if(p||(I.needDrain=!0),I.writing||I.corked){var k=I.lastBufferedRequest;I.lastBufferedRequest={chunk:M,encoding:W,isBuf:P,callback:t,next:null},k?k.next=I.lastBufferedRequest:I.bufferedRequest=I.lastBufferedRequest,I.bufferedRequestCount+=1}else u(T,I,!1,n,M,W,t);return p}function u(T,I,P,M,W,t,e){I.writelen=M,I.writecb=e,I.writing=!0,I.sync=!0,I.destroyed?I.onwrite(new Ht("write")):P?T._writev(W,I.onwrite):T._write(W,t,I.onwrite),I.sync=!1}function g(T,I,P,M,W){--I.pendingcb,P?(f.nextTick(W,M),f.nextTick(U,T,I),T._writableState.errorEmitted=!0,ot(T,M)):(W(M),T._writableState.errorEmitted=!0,ot(T,M),U(T,I))}function b(T){T.writing=!1,T.writecb=null,T.length-=T.writelen,T.writelen=0}function S(T,I){var P=T._writableState,M=P.sync,W=P.writecb;if(typeof W!="function")throw new mt;if(b(P),I)g(T,P,M,I,W);else{var t=_(P)||T.destroyed;t||P.corked||P.bufferProcessing||!P.bufferedRequest||B(T,P),M?f.nextTick(w,T,P,t,W):w(T,P,t,W)}}function w(T,I,P,M){P||A(T,I),I.pendingcb--,M(),U(T,I)}function A(T,I){I.length===0&&I.needDrain&&(I.needDrain=!1,T.emit("drain"))}function B(T,I){I.bufferProcessing=!0;var P=I.bufferedRequest;if(T._writev&&P&&P.next){var M=I.bufferedRequestCount,W=Array(M),t=I.corkedRequestsFree;t.entry=P;for(var e=0,n=!0;P;)W[e]=P,P.isBuf||(n=!1),P=P.next,e+=1;W.allBuffers=n,u(T,I,!0,I.length,W,"",t.finish),I.pendingcb++,I.lastBufferedRequest=null,t.next?(I.corkedRequestsFree=t.next,t.next=null):I.corkedRequestsFree=new m(I),I.bufferedRequestCount=0}else{for(;P;){var p=P.chunk,k=P.encoding,O=P.callback,D=I.objectMode?1:p.length;if(u(T,I,!1,D,p,k,O),P=P.next,I.bufferedRequestCount--,I.writing)break}P===null&&(I.lastBufferedRequest=null)}I.bufferedRequest=P,I.bufferProcessing=!1}function _(T){return T.ending&&T.length===0&&T.bufferedRequest===null&&!T.finished&&!T.writing}function R(T,I){T._final(function(P){I.pendingcb--,P&&ot(T,P),I.prefinished=!0,T.emit("prefinish"),U(T,I)})}function L(T,I){I.prefinished||I.finalCalled||(typeof T._final!="function"||I.destroyed?(I.prefinished=!0,T.emit("prefinish")):(I.pendingcb++,I.finalCalled=!0,f.nextTick(R,T,I)))}function U(T,I){var P=_(I);if(P&&(L(T,I),I.pendingcb===0&&(I.finished=!0,T.emit("finish"),I.autoDestroy))){var M=T._readableState;(!M||M.autoDestroy&&M.endEmitted)&&T.destroy()}return P}function H(T,I,P){I.ending=!0,U(T,I),P&&(I.finished?f.nextTick(P):T.once("finish",P)),I.ended=!0,T.writable=!1}function q(T,I,P){var M=T.entry;for(T.entry=null;M;){var W=M.callback;I.pendingcb--,W(P),M=M.next}I.corkedRequestsFree.next=T}d.exports=h;var $;h.WritableState=y;var nt={deprecate:i("util-deprecate")},st=i("./internal/streams/stream"),j=i("buffer").Buffer,Jt=c.Uint8Array||function(){},yt=i("./internal/streams/destroy"),pt=i("./internal/streams/state"),Q=pt.getHighWaterMark,tt=i("../errors").codes,bt=tt.ERR_INVALID_ARG_TYPE,ht=tt.ERR_METHOD_NOT_IMPLEMENTED,mt=tt.ERR_MULTIPLE_CALLBACK,Rt=tt.ERR_STREAM_CANNOT_PIPE,Ht=tt.ERR_STREAM_DESTROYED,gt=tt.ERR_STREAM_NULL_VALUES,qt=tt.ERR_STREAM_WRITE_AFTER_END,Wt=tt.ERR_UNKNOWN_ENCODING,ot=yt.errorOrDestroy;i("inherits")(h,st),y.prototype.getBuffer=function(){for(var T=this.bufferedRequest,I=[];T;)I.push(T),T=T.next;return I},function(){try{Object.defineProperty(y.prototype,"buffer",{get:nt.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var ft;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(ft=Function.prototype[Symbol.hasInstance],Object.defineProperty(h,Symbol.hasInstance,{value:function(T){return!!ft.call(this,T)||this===h&&T&&T._writableState instanceof y}})):ft=function(T){return T instanceof this},h.prototype.pipe=function(){ot(this,new Rt)},h.prototype.write=function(T,I,P){var M=this._writableState,W=!1,t=!M.objectMode&&o(T);return t&&!j.isBuffer(T)&&(T=C(T)),typeof I=="function"&&(P=I,I=null),t?I="buffer":!I&&(I=M.defaultEncoding),typeof P!="function"&&(P=l),M.ending?v(this,P):(t||E(this,M,T,P))&&(M.pendingcb++,W=N(this,M,t,T,I,P)),W},h.prototype.cork=function(){this._writableState.corked++},h.prototype.uncork=function(){var T=this._writableState;T.corked&&(T.corked--,!T.writing&&!T.corked&&!T.bufferProcessing&&T.bufferedRequest&&B(this,T))},h.prototype.setDefaultEncoding=function(T){if(typeof T=="string"&&(T=T.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((T+"").toLowerCase())))throw new Wt(T);return this._writableState.defaultEncoding=T,this},Object.defineProperty(h.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),h.prototype._write=function(T,I,P){P(new ht("_write()"))},h.prototype._writev=null,h.prototype.end=function(T,I,P){var M=this._writableState;return typeof T=="function"?(P=T,T=null,I=null):typeof I=="function"&&(P=I,I=null),T!=null&&this.write(T,I),M.corked&&(M.corked=1,this.uncork()),M.ending||H(this,M,P),this},Object.defineProperty(h.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(h.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(T){this._writableState&&(this._writableState.destroyed=T)}}),h.prototype.destroy=yt.destroy,h.prototype._undestroy=yt.undestroy,h.prototype._destroy=function(T,I){I(T)}}).call(this)}).call(this,i("_process"),typeof global>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:global)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/destroy":23,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,inherits:10,"util-deprecate":32}],21:[function(i,d){(function(f){(function(){"use strict";function c(A,B,_){return B in A?Object.defineProperty(A,B,{value:_,enumerable:!0,configurable:!0,writable:!0}):A[B]=_,A}function m(A,B){return{value:A,done:B}}function C(A){var B=A[v];if(B!==null){var _=A[b].read();_!==null&&(A[u]=null,A[v]=null,A[E]=null,B(m(_,!1)))}}function o(A){f.nextTick(C,A)}function l(A,B){return function(_,R){A.then(function(){return B[N]?void _(m(void 0,!0)):void B[g](_,R)},R)}}var y,h=i("./end-of-stream"),v=Symbol("lastResolve"),E=Symbol("lastReject"),x=Symbol("error"),N=Symbol("ended"),u=Symbol("lastPromise"),g=Symbol("handlePromise"),b=Symbol("stream"),S=Object.getPrototypeOf(function(){}),w=Object.setPrototypeOf((y={get stream(){return this[b]},next:function(){var A=this,B=this[x];if(B!==null)return Promise.reject(B);if(this[N])return Promise.resolve(m(void 0,!0));if(this[b].destroyed)return new Promise(function(U,H){f.nextTick(function(){A[x]?H(A[x]):U(m(void 0,!0))})});var _,R=this[u];if(R)_=new Promise(l(R,this));else{var L=this[b].read();if(L!==null)return Promise.resolve(m(L,!1));_=new Promise(this[g])}return this[u]=_,_}},c(y,Symbol.asyncIterator,function(){return this}),c(y,"return",function(){var A=this;return new Promise(function(B,_){A[b].destroy(null,function(R){return R?void _(R):void B(m(void 0,!0))})})}),y),S);d.exports=function(A){var B,_=Object.create(w,(B={},c(B,b,{value:A,writable:!0}),c(B,v,{value:null,writable:!0}),c(B,E,{value:null,writable:!0}),c(B,x,{value:null,writable:!0}),c(B,N,{value:A._readableState.endEmitted,writable:!0}),c(B,g,{value:function(R,L){var U=_[b].read();U?(_[u]=null,_[v]=null,_[E]=null,R(m(U,!1))):(_[v]=R,_[E]=L)},writable:!0}),B));return _[u]=null,h(A,function(R){if(R&&R.code!=="ERR_STREAM_PREMATURE_CLOSE"){var L=_[E];return L!==null&&(_[u]=null,_[v]=null,_[E]=null,L(R)),void(_[x]=R)}var U=_[v];U!==null&&(_[u]=null,_[v]=null,_[E]=null,U(m(void 0,!0))),_[N]=!0}),A.on("readable",o.bind(null,_)),_}}).call(this)}).call(this,i("_process"))},{"./end-of-stream":24,_process:12}],22:[function(i,d){"use strict";function f(u,g){var b=Object.keys(u);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(u);g&&(S=S.filter(function(w){return Object.getOwnPropertyDescriptor(u,w).enumerable})),b.push.apply(b,S)}return b}function c(u){for(var g,b=1;b<arguments.length;b++)g=arguments[b]==null?{}:arguments[b],b%2?f(Object(g),!0).forEach(function(S){m(u,S,g[S])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(g)):f(Object(g)).forEach(function(S){Object.defineProperty(u,S,Object.getOwnPropertyDescriptor(g,S))});return u}function m(u,g,b){return g in u?Object.defineProperty(u,g,{value:b,enumerable:!0,configurable:!0,writable:!0}):u[g]=b,u}function C(u,g){if(!(u instanceof g))throw new TypeError("Cannot call a class as a function")}function o(u,g){for(var b,S=0;S<g.length;S++)b=g[S],b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(u,b.key,b)}function l(u,g,b){return g&&o(u.prototype,g),b&&o(u,b),u}function y(u,g,b){v.prototype.copy.call(u,g,b)}var h=i("buffer"),v=h.Buffer,E=i("util"),x=E.inspect,N=x&&x.custom||"inspect";d.exports=function(){function u(){C(this,u),this.head=null,this.tail=null,this.length=0}return l(u,[{key:"push",value:function(g){var b={data:g,next:null};0<this.length?this.tail.next=b:this.head=b,this.tail=b,++this.length}},{key:"unshift",value:function(g){var b={data:g,next:this.head};this.length===0&&(this.tail=b),this.head=b,++this.length}},{key:"shift",value:function(){if(this.length!==0){var g=this.head.data;return this.head=this.length===1?this.tail=null:this.head.next,--this.length,g}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(g){if(this.length===0)return"";for(var b=this.head,S=""+b.data;b=b.next;)S+=g+b.data;return S}},{key:"concat",value:function(g){if(this.length===0)return v.alloc(0);for(var b=v.allocUnsafe(g>>>0),S=this.head,w=0;S;)y(S.data,b,w),w+=S.data.length,S=S.next;return b}},{key:"consume",value:function(g,b){var S;return g<this.head.data.length?(S=this.head.data.slice(0,g),this.head.data=this.head.data.slice(g)):g===this.head.data.length?S=this.shift():S=b?this._getString(g):this._getBuffer(g),S}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(g){var b=this.head,S=1,w=b.data;for(g-=w.length;b=b.next;){var A=b.data,B=g>A.length?A.length:g;if(w+=B===A.length?A:A.slice(0,g),g-=B,g===0){B===A.length?(++S,this.head=b.next?b.next:this.tail=null):(this.head=b,b.data=A.slice(B));break}++S}return this.length-=S,w}},{key:"_getBuffer",value:function(g){var b=v.allocUnsafe(g),S=this.head,w=1;for(S.data.copy(b),g-=S.data.length;S=S.next;){var A=S.data,B=g>A.length?A.length:g;if(A.copy(b,b.length-g,0,B),g-=B,g===0){B===A.length?(++w,this.head=S.next?S.next:this.tail=null):(this.head=S,S.data=A.slice(B));break}++w}return this.length-=w,b}},{key:N,value:function(g,b){return x(this,c({},b,{depth:0,customInspect:!1}))}}]),u}()},{buffer:3,util:2}],23:[function(i,d){(function(f){(function(){"use strict";function c(o,l){C(o,l),m(o)}function m(o){o._writableState&&!o._writableState.emitClose||o._readableState&&!o._readableState.emitClose||o.emit("close")}function C(o,l){o.emit("error",l)}d.exports={destroy:function(o,l){var y=this,h=this._readableState&&this._readableState.destroyed,v=this._writableState&&this._writableState.destroyed;return h||v?(l?l(o):o&&(this._writableState?!this._writableState.errorEmitted&&(this._writableState.errorEmitted=!0,f.nextTick(C,this,o)):f.nextTick(C,this,o)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(o||null,function(E){!l&&E?y._writableState?y._writableState.errorEmitted?f.nextTick(m,y):(y._writableState.errorEmitted=!0,f.nextTick(c,y,E)):f.nextTick(c,y,E):l?(f.nextTick(m,y),l(E)):f.nextTick(m,y)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(o,l){var y=o._readableState,h=o._writableState;y&&y.autoDestroy||h&&h.autoDestroy?o.destroy(l):o.emit("error",l)}}}).call(this)}).call(this,i("_process"))},{_process:12}],24:[function(i,d){"use strict";function f(l){var y=!1;return function(){if(!y){y=!0;for(var h=arguments.length,v=Array(h),E=0;E<h;E++)v[E]=arguments[E];l.apply(this,v)}}}function c(){}function m(l){return l.setHeader&&typeof l.abort=="function"}function C(l,y,h){if(typeof y=="function")return C(l,null,y);y||(y={}),h=f(h||c);var v=y.readable||y.readable!==!1&&l.readable,E=y.writable||y.writable!==!1&&l.writable,x=function(){l.writable||u()},N=l._writableState&&l._writableState.finished,u=function(){E=!1,N=!0,v||h.call(l)},g=l._readableState&&l._readableState.endEmitted,b=function(){v=!1,g=!0,E||h.call(l)},S=function(B){h.call(l,B)},w=function(){var B;return v&&!g?(l._readableState&&l._readableState.ended||(B=new o),h.call(l,B)):E&&!N?(l._writableState&&l._writableState.ended||(B=new o),h.call(l,B)):void 0},A=function(){l.req.on("finish",u)};return m(l)?(l.on("complete",u),l.on("abort",w),l.req?A():l.on("request",A)):E&&!l._writableState&&(l.on("end",x),l.on("close",x)),l.on("end",b),l.on("finish",u),y.error!==!1&&l.on("error",S),l.on("close",w),function(){l.removeListener("complete",u),l.removeListener("abort",w),l.removeListener("request",A),l.req&&l.req.removeListener("finish",u),l.removeListener("end",x),l.removeListener("close",x),l.removeListener("finish",u),l.removeListener("end",b),l.removeListener("error",S),l.removeListener("close",w)}}var o=i("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;d.exports=C},{"../../../errors":15}],25:[function(i,d){d.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],26:[function(i,d){"use strict";function f(N){var u=!1;return function(){u||(u=!0,N.apply(void 0,arguments))}}function c(N){if(N)throw N}function m(N){return N.setHeader&&typeof N.abort=="function"}function C(N,u,g,b){b=f(b);var S=!1;N.on("close",function(){S=!0}),h===void 0&&(h=i("./end-of-stream")),h(N,{readable:u,writable:g},function(A){return A?b(A):(S=!0,void b())});var w=!1;return function(A){if(!S)return w?void 0:(w=!0,m(N)?N.abort():typeof N.destroy=="function"?N.destroy():void b(A||new x("pipe")))}}function o(N){N()}function l(N,u){return N.pipe(u)}function y(N){return N.length&&typeof N[N.length-1]=="function"?N.pop():c}var h,v=i("../../../errors").codes,E=v.ERR_MISSING_ARGS,x=v.ERR_STREAM_DESTROYED;d.exports=function(){for(var N=arguments.length,u=Array(N),g=0;g<N;g++)u[g]=arguments[g];var b=y(u);if(Array.isArray(u[0])&&(u=u[0]),2>u.length)throw new E("streams");var S,w=u.map(function(A,B){var _=B<u.length-1;return C(A,_,0<B,function(R){S||(S=R),R&&w.forEach(o),_||(w.forEach(o),b(S))})});return u.reduce(l)}},{"../../../errors":15,"./end-of-stream":24}],27:[function(i,d){"use strict";function f(m,C,o){return m.highWaterMark==null?C?m[o]:null:m.highWaterMark}var c=i("../../../errors").codes.ERR_INVALID_OPT_VALUE;d.exports={getHighWaterMark:function(m,C,o,l){var y=f(C,l,o);if(y!=null){if(!(isFinite(y)&&a(y)===y)||0>y){var h=l?o:"highWaterMark";throw new c(h,y)}return a(y)}return m.objectMode?16:16384}}},{"../../../errors":15}],28:[function(i,d){d.exports=i("events").EventEmitter},{events:7}],29:[function(i,d,f){f=d.exports=i("./lib/_stream_readable.js"),f.Stream=f,f.Readable=f,f.Writable=i("./lib/_stream_writable.js"),f.Duplex=i("./lib/_stream_duplex.js"),f.Transform=i("./lib/_stream_transform.js"),f.PassThrough=i("./lib/_stream_passthrough.js"),f.finished=i("./lib/internal/streams/end-of-stream.js"),f.pipeline=i("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":16,"./lib/_stream_passthrough.js":17,"./lib/_stream_readable.js":18,"./lib/_stream_transform.js":19,"./lib/_stream_writable.js":20,"./lib/internal/streams/end-of-stream.js":24,"./lib/internal/streams/pipeline.js":26}],30:[function(i,d,f){function c(l,y){for(var h in l)y[h]=l[h]}function m(l,y,h){return o(l,y,h)}var C=i("buffer"),o=C.Buffer;o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?d.exports=C:(c(C,f),f.Buffer=m),m.prototype=Object.create(o.prototype),c(o,m),m.from=function(l,y,h){if(typeof l=="number")throw new TypeError("Argument must not be a number");return o(l,y,h)},m.alloc=function(l,y,h){if(typeof l!="number")throw new TypeError("Argument must be a number");var v=o(l);return y===void 0?v.fill(0):typeof h=="string"?v.fill(y,h):v.fill(y),v},m.allocUnsafe=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return o(l)},m.allocUnsafeSlow=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return C.SlowBuffer(l)}},{buffer:3}],31:[function(i,d,f){"use strict";function c(w){if(!w)return"utf8";for(var A;;)switch(w){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return w;default:if(A)return;w=(""+w).toLowerCase(),A=!0}}function m(w){var A=c(w);if(typeof A!="string"&&(b.isEncoding===S||!S(w)))throw new Error("Unknown encoding: "+w);return A||w}function C(w){this.encoding=m(w);var A;switch(this.encoding){case"utf16le":this.text=v,this.end=E,A=4;break;case"utf8":this.fillLast=h,A=4;break;case"base64":this.text=x,this.end=N,A=3;break;default:return this.write=u,void(this.end=g)}this.lastNeed=0,this.lastTotal=0,this.lastChar=b.allocUnsafe(A)}function o(w){return 127>=w?0:w>>5==6?2:w>>4==14?3:w>>3==30?4:w>>6==2?-1:-2}function l(w,A,B){var _=A.length-1;if(_<B)return 0;var R=o(A[_]);return 0<=R?(0<R&&(w.lastNeed=R-1),R):--_<B||R===-2?0:(R=o(A[_]),0<=R?(0<R&&(w.lastNeed=R-2),R):--_<B||R===-2?0:(R=o(A[_]),0<=R?(0<R&&(R===2?R=0:w.lastNeed=R-3),R):0))}function y(w,A){if((192&A[0])!=128)return w.lastNeed=0,"\uFFFD";if(1<w.lastNeed&&1<A.length){if((192&A[1])!=128)return w.lastNeed=1,"\uFFFD";if(2<w.lastNeed&&2<A.length&&(192&A[2])!=128)return w.lastNeed=2,"\uFFFD"}}function h(w){var A=this.lastTotal-this.lastNeed,B=y(this,w,A);return B===void 0?this.lastNeed<=w.length?(w.copy(this.lastChar,A,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(w.copy(this.lastChar,A,0,w.length),void(this.lastNeed-=w.length)):B}function v(w,A){if((w.length-A)%2==0){var B=w.toString("utf16le",A);if(B){var _=B.charCodeAt(B.length-1);if(55296<=_&&56319>=_)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=w[w.length-2],this.lastChar[1]=w[w.length-1],B.slice(0,-1)}return B}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=w[w.length-1],w.toString("utf16le",A,w.length-1)}function E(w){var A=w&&w.length?this.write(w):"";if(this.lastNeed){var B=this.lastTotal-this.lastNeed;return A+this.lastChar.toString("utf16le",0,B)}return A}function x(w,A){var B=(w.length-A)%3;return B==0?w.toString("base64",A):(this.lastNeed=3-B,this.lastTotal=3,B==1?this.lastChar[0]=w[w.length-1]:(this.lastChar[0]=w[w.length-2],this.lastChar[1]=w[w.length-1]),w.toString("base64",A,w.length-B))}function N(w){var A=w&&w.length?this.write(w):"";return this.lastNeed?A+this.lastChar.toString("base64",0,3-this.lastNeed):A}function u(w){return w.toString(this.encoding)}function g(w){return w&&w.length?this.write(w):""}var b=i("safe-buffer").Buffer,S=b.isEncoding||function(w){switch(w=""+w,w&&w.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};f.StringDecoder=C,C.prototype.write=function(w){if(w.length===0)return"";var A,B;if(this.lastNeed){if(A=this.fillLast(w),A===void 0)return"";B=this.lastNeed,this.lastNeed=0}else B=0;return B<w.length?A?A+this.text(w,B):this.text(w,B):A||""},C.prototype.end=function(w){var A=w&&w.length?this.write(w):"";return this.lastNeed?A+"\uFFFD":A},C.prototype.text=function(w,A){var B=l(this,w,A);if(!this.lastNeed)return w.toString("utf8",A);this.lastTotal=B;var _=w.length-(B-this.lastNeed);return w.copy(this.lastChar,0,_),w.toString("utf8",A,_)},C.prototype.fillLast=function(w){return this.lastNeed<=w.length?(w.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(w.copy(this.lastChar,this.lastTotal-this.lastNeed,0,w.length),void(this.lastNeed-=w.length))}},{"safe-buffer":30}],32:[function(i,d){(function(f){(function(){function c(m){try{if(!f.localStorage)return!1}catch{return!1}var C=f.localStorage[m];return C!=null&&(C+"").toLowerCase()==="true"}d.exports=function(m,C){function o(){if(!l){if(c("throwDeprecation"))throw new Error(C);c("traceDeprecation")?console.trace(C):console.warn(C),l=!0}return m.apply(this,arguments)}if(c("noDeprecation"))return m;var l=!1;return o}}).call(this)}).call(this,typeof global>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:global)},{}],"/":[function(i,d){function f(N){return N.replace(/a=ice-options:trickle\s\n/g,"")}function c(N){console.warn(N)}let m=i("debug")("simple-peer"),C=i("get-browser-rtc"),o=i("randombytes"),l=i("readable-stream"),y=i("queue-microtask"),h=i("err-code"),{Buffer:v}=i("buffer"),E=65536;class x extends l.Duplex{constructor(u){if(u=Object.assign({allowHalfOpen:!1},u),super(u),this._id=o(4).toString("hex").slice(0,7),this._debug("new peer %o",u),this.channelName=u.initiator?u.channelName||o(20).toString("hex"):null,this.initiator=u.initiator||!1,this.channelConfig=u.channelConfig||x.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},x.config,u.config),this.offerOptions=u.offerOptions||{},this.answerOptions=u.answerOptions||{},this.sdpTransform=u.sdpTransform||(g=>g),this.streams=u.streams||(u.stream?[u.stream]:[]),this.trickle=u.trickle===void 0||u.trickle,this.allowHalfTrickle=u.allowHalfTrickle!==void 0&&u.allowHalfTrickle,this.iceCompleteTimeout=u.iceCompleteTimeout||5e3,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=u.wrtc&&typeof u.wrtc=="object"?u.wrtc:C(),!this._wrtc)throw h(typeof window>"u"?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(g){return void this.destroy(h(g,"ERR_PC_CONSTRUCTOR"))}this._isReactNativeWebrtc=typeof this._pc._peerConnectionId=="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=g=>{this._onIceCandidate(g)},typeof this._pc.peerIdentity=="object"&&this._pc.peerIdentity.catch(g=>{this.destroy(h(g,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=g=>{this._setupData(g)},this.streams&&this.streams.forEach(g=>{this.addStream(g)}),this._pc.ontrack=g=>{this._onTrack(g)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(u){if(!this.destroying){if(this.destroyed)throw h(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if(typeof u=="string")try{u=JSON.parse(u)}catch{u={}}this._debug("signal()"),u.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),u.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(u.transceiverRequest.kind,u.transceiverRequest.init)),u.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(u.candidate):this._pendingCandidates.push(u.candidate)),u.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(u)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(g=>{this._addIceCandidate(g)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer"&&this._createAnswer())}).catch(g=>{this.destroy(h(g,"ERR_SET_REMOTE_DESCRIPTION"))}),u.sdp||u.candidate||u.renegotiate||u.transceiverRequest||this.destroy(h(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(u){let g=new this._wrtc.RTCIceCandidate(u);this._pc.addIceCandidate(g).catch(b=>{!g.address||g.address.endsWith(".local")?c("Ignoring unsupported ICE candidate."):this.destroy(h(b,"ERR_ADD_ICE_CANDIDATE"))})}send(u){if(!this.destroying){if(this.destroyed)throw h(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(u)}}addTransceiver(u,g){if(!this.destroying){if(this.destroyed)throw h(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(u,g),this._needsNegotiation()}catch(b){this.destroy(h(b,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:u,init:g}})}}addStream(u){if(!this.destroying){if(this.destroyed)throw h(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),u.getTracks().forEach(g=>{this.addTrack(g,u)})}}addTrack(u,g){if(this.destroying)return;if(this.destroyed)throw h(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");let b=this._senderMap.get(u)||new Map,S=b.get(g);if(!S)S=this._pc.addTrack(u,g),b.set(g,S),this._senderMap.set(u,b),this._needsNegotiation();else throw S.removed?h(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):h(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED")}replaceTrack(u,g,b){if(this.destroying)return;if(this.destroyed)throw h(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");let S=this._senderMap.get(u),w=S?S.get(b):null;if(!w)throw h(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");g&&this._senderMap.set(g,S),w.replaceTrack==null?this.destroy(h(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK")):w.replaceTrack(g)}removeTrack(u,g){if(this.destroying)return;if(this.destroyed)throw h(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");let b=this._senderMap.get(u),S=b?b.get(g):null;if(!S)throw h(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{S.removed=!0,this._pc.removeTrack(S)}catch(w){w.name==="NS_ERROR_UNEXPECTED"?this._sendersAwaitingStable.push(S):this.destroy(h(w,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(u){if(!this.destroying){if(this.destroyed)throw h(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),u.getTracks().forEach(g=>{this.removeTrack(g,u)})}}_needsNegotiation(){this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,y(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw h(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(u){this._destroy(u,()=>{})}_destroy(u,g){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",u&&(u.message||u)),y(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",u&&(u.message||u)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch{}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch{}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,u&&this.emit("error",u),this.emit("close"),g()}))}_setupData(u){if(!u.channel)return this.destroy(h(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=u.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold=="number"&&(this._channel.bufferedAmountLowThreshold=E),this.channelName=this._channel.label,this._channel.onmessage=b=>{this._onChannelMessage(b)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=b=>{let S=b.error instanceof Error?b.error:new Error(`Datachannel error: ${b.message} ${b.filename}:${b.lineno}:${b.colno}`);this.destroy(h(S,"ERR_DATA_CHANNEL"))};let g=!1;this._closingInterval=setInterval(()=>{this._channel&&this._channel.readyState==="closing"?(g&&this._onChannelClose(),g=!0):g=!1},5e3)}_read(){}_write(u,g,b){if(this.destroyed)return b(h(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(u)}catch(S){return this.destroy(h(S,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>E?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=b):b(null)}else this._debug("write before connect"),this._chunk=u,this._cb=b}_onFinish(){if(!this.destroyed){let u=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?u():this.once("connect",u)}}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(u=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(u.sdp=f(u.sdp)),u.sdp=this.sdpTransform(u.sdp);let g=()=>{if(!this.destroyed){let b=this._pc.localDescription||u;this._debug("signal"),this.emit("signal",{type:b.type,sdp:b.sdp})}};this._pc.setLocalDescription(u).then(()=>{this._debug("createOffer success"),this.destroyed||(this.trickle||this._iceComplete?g():this.once("_iceComplete",g))}).catch(b=>{this.destroy(h(b,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(u=>{this.destroy(h(u,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(u=>{u.mid||!u.sender.track||u.requested||(u.requested=!0,this.addTransceiver(u.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(u=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(u.sdp=f(u.sdp)),u.sdp=this.sdpTransform(u.sdp);let g=()=>{if(!this.destroyed){let b=this._pc.localDescription||u;this._debug("signal"),this.emit("signal",{type:b.type,sdp:b.sdp}),this.initiator||this._requestMissingTransceivers()}};this._pc.setLocalDescription(u).then(()=>{this.destroyed||(this.trickle||this._iceComplete?g():this.once("_iceComplete",g))}).catch(b=>{this.destroy(h(b,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(u=>{this.destroy(h(u,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||this._pc.connectionState==="failed"&&this.destroy(h(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;let u=this._pc.iceConnectionState,g=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",u,g),this.emit("iceStateChange",u,g),(u==="connected"||u==="completed")&&(this._pcReady=!0,this._maybeReady()),u==="failed"&&this.destroy(h(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),u==="closed"&&this.destroy(h(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(u){let g=b=>(Object.prototype.toString.call(b.values)==="[object Array]"&&b.values.forEach(S=>{Object.assign(b,S)}),b);this._pc.getStats.length===0||this._isReactNativeWebrtc?this._pc.getStats().then(b=>{let S=[];b.forEach(w=>{S.push(g(w))}),u(null,S)},b=>u(b)):0<this._pc.getStats.length?this._pc.getStats(b=>{if(this.destroyed)return;let S=[];b.result().forEach(w=>{let A={};w.names().forEach(B=>{A[B]=w.stat(B)}),A.id=w.id,A.type=w.type,A.timestamp=w.timestamp,S.push(g(A))}),u(null,S)},b=>u(b)):u(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;let u=()=>{this.destroyed||this.getStats((g,b)=>{if(this.destroyed)return;g&&(b=[]);let S={},w={},A={},B=!1;b.forEach(R=>{(R.type==="remotecandidate"||R.type==="remote-candidate")&&(S[R.id]=R),(R.type==="localcandidate"||R.type==="local-candidate")&&(w[R.id]=R),(R.type==="candidatepair"||R.type==="candidate-pair")&&(A[R.id]=R)});let _=R=>{B=!0;let L=w[R.localCandidateId];L&&(L.ip||L.address)?(this.localAddress=L.ip||L.address,this.localPort=+L.port):L&&L.ipAddress?(this.localAddress=L.ipAddress,this.localPort=+L.portNumber):typeof R.googLocalAddress=="string"&&(L=R.googLocalAddress.split(":"),this.localAddress=L[0],this.localPort=+L[1]),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let U=S[R.remoteCandidateId];U&&(U.ip||U.address)?(this.remoteAddress=U.ip||U.address,this.remotePort=+U.port):U&&U.ipAddress?(this.remoteAddress=U.ipAddress,this.remotePort=+U.portNumber):typeof R.googRemoteAddress=="string"&&(U=R.googRemoteAddress.split(":"),this.remoteAddress=U[0],this.remotePort=+U[1]),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(b.forEach(R=>{R.type==="transport"&&R.selectedCandidatePairId&&_(A[R.selectedCandidatePairId]),(R.type==="googCandidatePair"&&R.googActiveConnection==="true"||(R.type==="candidatepair"||R.type==="candidate-pair")&&R.selected)&&_(R)}),!B&&(!Object.keys(A).length||Object.keys(w).length))return void setTimeout(u,100);if(this._connecting=!1,this._connected=!0,this._chunk){try{this.send(this._chunk)}catch(L){return this.destroy(h(L,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');let R=this._cb;this._cb=null,R(null)}typeof this._channel.bufferedAmountLowThreshold!="number"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};u()}_onInterval(){this._cb&&this._channel&&!(this._channel.bufferedAmount>E)&&this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||(this._pc.signalingState==="stable"&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(u=>{this._pc.removeTrack(u),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(u){this.destroyed||(u.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:u.candidate.candidate,sdpMLineIndex:u.candidate.sdpMLineIndex,sdpMid:u.candidate.sdpMid}}):!u.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),u.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(u){if(this.destroyed)return;let g=u.data;g instanceof ArrayBuffer&&(g=v.from(g)),this.push(g)}_onChannelBufferedAmountLow(){if(!this.destroyed&&this._cb){this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);let u=this._cb;this._cb=null,u(null)}}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(u){this.destroyed||u.streams.forEach(g=>{this._debug("on track"),this.emit("track",u.track,g),this._remoteTracks.push({track:u.track,stream:g}),this._remoteStreams.some(b=>b.id===g.id)||(this._remoteStreams.push(g),y(()=>{this._debug("on stream"),this.emit("stream",g)}))})}_debug(){let u=[].slice.call(arguments);u[0]="["+this._id+"] "+u[0],m.apply(null,u)}}x.WEBRTC_SUPPORT=!!C(),x.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},x.channelConfig={},d.exports=x},{buffer:3,debug:4,"err-code":6,"get-browser-rtc":8,"queue-microtask":13,randombytes:14,"readable-stream":29}]},{},[])("/")})});var Se=Yt(()=>{});var We=Yt(V=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0});V.utils=V.schnorr=V.verify=V.signSync=V.sign=V.getSharedSecret=V.recoverPublicKey=V.getPublicKey=V.Signature=V.Point=V.CURVE=void 0;var or=Se(),Y=BigInt(0),et=BigInt(1),vt=BigInt(2),Kt=BigInt(3),Re=BigInt(8),X=Object.freeze({a:Y,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:et,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")});V.CURVE=X;var Ce=(a,r)=>(a+r/vt)/r,Qt={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(a){let{n:r}=X,s=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),i=-et*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),d=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),f=s,c=BigInt("0x100000000000000000000000000000000"),m=Ce(f*a,r),C=Ce(-i*a,r),o=F(a-m*s-C*d,r),l=F(-m*i-C*f,r),y=o>c,h=l>c;if(y&&(o=r-o),h&&(l=r-l),o>c||l>c)throw new Error("splitScalarEndo: Endomorphism failed, k="+a);return{k1neg:y,k1:o,k2neg:h,k2:l}}},lt=32,Tt=32,Ne=32,ie=lt+1,se=2*lt+1;function Te(a){let{a:r,b:s}=X,i=F(a*a),d=F(i*a);return F(d+r*a+s)}var te=X.a===Y,Gt=class extends Error{constructor(r){super(r)}};function Ae(a){if(!(a instanceof it))throw new TypeError("JacobianPoint expected")}var it=class a{constructor(r,s,i){this.x=r,this.y=s,this.z=i}static fromAffine(r){if(!(r instanceof J))throw new TypeError("JacobianPoint#fromAffine: expected Point");return r.equals(J.ZERO)?a.ZERO:new a(r.x,r.y,et)}static toAffineBatch(r){let s=fr(r.map(i=>i.z));return r.map((i,d)=>i.toAffine(s[d]))}static normalizeZ(r){return a.toAffineBatch(r).map(a.fromAffine)}equals(r){Ae(r);let{x:s,y:i,z:d}=this,{x:f,y:c,z:m}=r,C=F(d*d),o=F(m*m),l=F(s*o),y=F(f*C),h=F(F(i*m)*o),v=F(F(c*d)*C);return l===y&&h===v}negate(){return new a(this.x,F(-this.y),this.z)}double(){let{x:r,y:s,z:i}=this,d=F(r*r),f=F(s*s),c=F(f*f),m=r+f,C=F(vt*(F(m*m)-d-c)),o=F(Kt*d),l=F(o*o),y=F(l-vt*C),h=F(o*(C-y)-Re*c),v=F(vt*s*i);return new a(y,h,v)}add(r){Ae(r);let{x:s,y:i,z:d}=this,{x:f,y:c,z:m}=r;if(f===Y||c===Y)return this;if(s===Y||i===Y)return r;let C=F(d*d),o=F(m*m),l=F(s*o),y=F(f*C),h=F(F(i*m)*o),v=F(F(c*d)*C),E=F(y-l),x=F(v-h);if(E===Y)return x===Y?this.double():a.ZERO;let N=F(E*E),u=F(E*N),g=F(l*N),b=F(x*x-u-vt*g),S=F(x*(g-b)-h*u),w=F(d*m*E);return new a(b,S,w)}subtract(r){return this.add(r.negate())}multiplyUnsafe(r){let s=a.ZERO;if(typeof r=="bigint"&&r===Y)return s;let i=Oe(r);if(i===et)return this;if(!te){let y=s,h=this;for(;i>Y;)i&et&&(y=y.add(h)),h=h.double(),i>>=et;return y}let{k1neg:d,k1:f,k2neg:c,k2:m}=Qt.splitScalar(i),C=s,o=s,l=this;for(;f>Y||m>Y;)f&et&&(C=C.add(l)),m&et&&(o=o.add(l)),l=l.double(),f>>=et,m>>=et;return d&&(C=C.negate()),c&&(o=o.negate()),o=new a(F(o.x*Qt.beta),o.y,o.z),C.add(o)}precomputeWindow(r){let s=te?128/r+1:256/r+1,i=[],d=this,f=d;for(let c=0;c<s;c++){f=d,i.push(f);for(let m=1;m<2**(r-1);m++)f=f.add(d),i.push(f);d=f.double()}return i}wNAF(r,s){!s&&this.equals(a.BASE)&&(s=J.BASE);let i=s&&s._WINDOW_SIZE||1;if(256%i)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let d=s&&ge.get(s);d||(d=this.precomputeWindow(i),s&&i!==1&&(d=a.normalizeZ(d),ge.set(s,d)));let f=a.ZERO,c=a.BASE,m=1+(te?128/i:256/i),C=2**(i-1),o=BigInt(2**i-1),l=2**i,y=BigInt(i);for(let h=0;h<m;h++){let v=h*C,E=Number(r&o);r>>=y,E>C&&(E-=l,r+=et);let x=v,N=v+Math.abs(E)-1,u=h%2!==0,g=E<0;E===0?c=c.add(ee(u,d[x])):f=f.add(ee(g,d[N]))}return{p:f,f:c}}multiply(r,s){let i=Oe(r),d,f;if(te){let{k1neg:c,k1:m,k2neg:C,k2:o}=Qt.splitScalar(i),{p:l,f:y}=this.wNAF(m,s),{p:h,f:v}=this.wNAF(o,s);l=ee(c,l),h=ee(C,h),h=new a(F(h.x*Qt.beta),h.y,h.z),d=l.add(h),f=y.add(v)}else{let{p:c,f:m}=this.wNAF(i,s);d=c,f=m}return a.normalizeZ([d,f])[0]}toAffine(r){let{x:s,y:i,z:d}=this,f=this.equals(a.ZERO);r==null&&(r=f?Re:Ft(d));let c=r,m=F(c*c),C=F(m*c),o=F(s*m),l=F(i*C),y=F(d*c);if(f)return J.ZERO;if(y!==et)throw new Error("invZ was invalid");return new J(o,l)}};it.BASE=new it(X.Gx,X.Gy,et);it.ZERO=new it(Y,et,Y);function ee(a,r){let s=r.negate();return a?s:r}var ge=new WeakMap,J=class a{constructor(r,s){this.x=r,this.y=s}_setWindowSize(r){this._WINDOW_SIZE=r,ge.delete(this)}hasEvenY(){return this.y%vt===Y}static fromCompressedHex(r){let s=r.length===32,i=ct(s?r:r.subarray(1));if(!ne(i))throw new Error("Point is not on curve");let d=Te(i),f=hr(d),c=(f&et)===et;s?c&&(f=F(-f)):(r[0]&1)===1!==c&&(f=F(-f));let m=new a(i,f);return m.assertValidity(),m}static fromUncompressedHex(r){let s=ct(r.subarray(1,lt+1)),i=ct(r.subarray(lt+1,lt*2+1)),d=new a(s,i);return d.assertValidity(),d}static fromHex(r){let s=dt(r),i=s.length,d=s[0];if(i===lt)return this.fromCompressedHex(s);if(i===ie&&(d===2||d===3))return this.fromCompressedHex(s);if(i===se&&d===4)return this.fromUncompressedHex(s);throw new Error(`Point.fromHex: received invalid point. Expected 32-${ie} compressed bytes or ${se} uncompressed bytes, not ${i}`)}static fromPrivateKey(r){return a.BASE.multiply(At(r))}static fromSignature(r,s,i){let{r:d,s:f}=Le(s);if(![0,1,2,3].includes(i))throw new Error("Cannot recover: invalid recovery bit");let c=ye(dt(r)),{n:m}=X,C=i===2||i===3?d+m:d,o=Ft(C,m),l=F(-c*o,m),y=F(f*o,m),h=i&1?"03":"02",v=a.fromHex(h+Et(C)),E=a.BASE.multiplyAndAddUnsafe(v,l,y);if(!E)throw new Error("Cannot recover signature: point at infinify");return E.assertValidity(),E}toRawBytes(r=!1){return St(this.toHex(r))}toHex(r=!1){let s=Et(this.x);return r?`${this.hasEvenY()?"02":"03"}${s}`:`04${s}${Et(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){let r="Point is not on elliptic curve",{x:s,y:i}=this;if(!ne(s)||!ne(i))throw new Error(r);let d=F(i*i),f=Te(s);if(F(d-f)!==Y)throw new Error(r)}equals(r){return this.x===r.x&&this.y===r.y}negate(){return new a(this.x,F(-this.y))}double(){return it.fromAffine(this).double().toAffine()}add(r){return it.fromAffine(this).add(it.fromAffine(r)).toAffine()}subtract(r){return this.add(r.negate())}multiply(r){return it.fromAffine(this).multiply(r,this).toAffine()}multiplyAndAddUnsafe(r,s,i){let d=it.fromAffine(this),f=s===Y||s===et||this!==a.BASE?d.multiplyUnsafe(s):d.multiply(s),c=it.fromAffine(r).multiplyUnsafe(i),m=f.add(c);return m.equals(it.ZERO)?void 0:m.toAffine()}};V.Point=J;J.BASE=new J(X.Gx,X.Gy);J.ZERO=new J(Y,Y);function ke(a){return Number.parseInt(a[0],16)>=8?"00"+a:a}function xe(a){if(a.length<2||a[0]!==2)throw new Error(`Invalid signature integer tag: ${Lt(a)}`);let r=a[1],s=a.subarray(2,r+2);if(!r||s.length!==r)throw new Error("Invalid signature integer: wrong length");if(s[0]===0&&s[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:ct(s),left:a.subarray(r+2)}}function ar(a){if(a.length<2||a[0]!=48)throw new Error(`Invalid signature tag: ${Lt(a)}`);if(a[1]!==a.length-2)throw new Error("Invalid signature: incorrect length");let{data:r,left:s}=xe(a.subarray(2)),{data:i,left:d}=xe(s);if(d.length)throw new Error(`Invalid signature: left bytes after parsing: ${Lt(d)}`);return{r,s:i}}var Ct=class a{constructor(r,s){this.r=r,this.s=s,this.assertValidity()}static fromCompact(r){let s=r instanceof Uint8Array,i="Signature.fromCompact";if(typeof r!="string"&&!s)throw new TypeError(`${i}: Expected string or Uint8Array`);let d=s?Lt(r):r;if(d.length!==128)throw new Error(`${i}: Expected 64-byte hex`);return new a(oe(d.slice(0,64)),oe(d.slice(64,128)))}static fromDER(r){let s=r instanceof Uint8Array;if(typeof r!="string"&&!s)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");let{r:i,s:d}=ar(s?r:St(r));return new a(i,d)}static fromHex(r){return this.fromDER(r)}assertValidity(){let{r,s}=this;if(!Dt(r))throw new Error("Invalid Signature: r must be 0 < r < n");if(!Dt(s))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){let r=X.n>>et;return this.s>r}normalizeS(){return this.hasHighS()?new a(this.r,F(-this.s,X.n)):this}toDERRawBytes(){return St(this.toDERHex())}toDERHex(){let r=ke($t(this.s)),s=ke($t(this.r)),i=r.length/2,d=s.length/2,f=$t(i),c=$t(d);return`30${$t(d+i+4)}02${c}${s}02${f}${r}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return St(this.toCompactHex())}toCompactHex(){return Et(this.r)+Et(this.s)}};V.Signature=Ct;function _t(...a){if(!a.every(i=>i instanceof Uint8Array))throw new Error("Uint8Array list expected");if(a.length===1)return a[0];let r=a.reduce((i,d)=>i+d.length,0),s=new Uint8Array(r);for(let i=0,d=0;i<a.length;i++){let f=a[i];s.set(f,d),d+=f.length}return s}var cr=Array.from({length:256},(a,r)=>r.toString(16).padStart(2,"0"));function Lt(a){if(!(a instanceof Uint8Array))throw new Error("Expected Uint8Array");let r="";for(let s=0;s<a.length;s++)r+=cr[a[s]];return r}var ur=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function Et(a){if(typeof a!="bigint")throw new Error("Expected bigint");if(!(Y<=a&&a<ur))throw new Error("Expected number 0 <= n < 2^256");return a.toString(16).padStart(64,"0")}function Pt(a){let r=St(Et(a));if(r.length!==32)throw new Error("Error: expected 32 bytes");return r}function $t(a){let r=a.toString(16);return r.length&1?`0${r}`:r}function oe(a){if(typeof a!="string")throw new TypeError("hexToNumber: expected string, got "+typeof a);return BigInt(`0x${a}`)}function St(a){if(typeof a!="string")throw new TypeError("hexToBytes: expected string, got "+typeof a);if(a.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+a.length);let r=new Uint8Array(a.length/2);for(let s=0;s<r.length;s++){let i=s*2,d=a.slice(i,i+2),f=Number.parseInt(d,16);if(Number.isNaN(f)||f<0)throw new Error("Invalid byte sequence");r[s]=f}return r}function ct(a){return oe(Lt(a))}function dt(a){return a instanceof Uint8Array?Uint8Array.from(a):St(a)}function Oe(a){if(typeof a=="number"&&Number.isSafeInteger(a)&&a>0)return BigInt(a);if(typeof a=="bigint"&&Dt(a))return a;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function F(a,r=X.P){let s=a%r;return s>=Y?s:r+s}function ut(a,r){let{P:s}=X,i=a;for(;r-- >Y;)i*=i,i%=s;return i}function hr(a){let{P:r}=X,s=BigInt(6),i=BigInt(11),d=BigInt(22),f=BigInt(23),c=BigInt(44),m=BigInt(88),C=a*a*a%r,o=C*C*a%r,l=ut(o,Kt)*o%r,y=ut(l,Kt)*o%r,h=ut(y,vt)*C%r,v=ut(h,i)*h%r,E=ut(v,d)*v%r,x=ut(E,c)*E%r,N=ut(x,m)*x%r,u=ut(N,c)*E%r,g=ut(u,Kt)*o%r,b=ut(g,f)*v%r,S=ut(b,s)*C%r,w=ut(S,vt);if(w*w%r!==a)throw new Error("Cannot find square root");return w}function Ft(a,r=X.P){if(a===Y||r<=Y)throw new Error(`invert: expected positive integers, got n=${a} mod=${r}`);let s=F(a,r),i=r,d=Y,f=et,c=et,m=Y;for(;s!==Y;){let o=i/s,l=i%s,y=d-c*o,h=f-m*o;i=s,s=l,d=c,f=m,c=y,m=h}if(i!==et)throw new Error("invert: does not exist");return F(d,r)}function fr(a,r=X.P){let s=new Array(a.length),i=a.reduce((f,c,m)=>c===Y?f:(s[m]=f,F(f*c,r)),et),d=Ft(i,r);return a.reduceRight((f,c,m)=>c===Y?f:(s[m]=F(f*s[m],r),F(f*c,r)),d),s}function lr(a){let r=a.length*8-Tt*8,s=ct(a);return r>0?s>>BigInt(r):s}function ye(a,r=!1){let s=lr(a);if(r)return s;let{n:i}=X;return s>=i?s-i:s}var Bt,Zt,ae=class{constructor(r,s){if(this.hashLen=r,this.qByteLen=s,typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof s!="number"||s<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(r).fill(1),this.k=new Uint8Array(r).fill(0),this.counter=0}hmac(...r){return V.utils.hmacSha256(this.k,...r)}hmacSync(...r){return Zt(this.k,...r)}checkSync(){if(typeof Zt!="function")throw new Gt("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(r=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),r),this.v=await this.hmac(this.v),r.length!==0&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),r),this.v=await this.hmac(this.v))}reseedSync(r=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),r),this.v=this.hmacSync(this.v),r.length!==0&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),r),this.v=this.hmacSync(this.v))}async generate(){this.incr();let r=0,s=[];for(;r<this.qByteLen;){this.v=await this.hmac(this.v);let i=this.v.slice();s.push(i),r+=this.v.length}return _t(...s)}generateSync(){this.checkSync(),this.incr();let r=0,s=[];for(;r<this.qByteLen;){this.v=this.hmacSync(this.v);let i=this.v.slice();s.push(i),r+=this.v.length}return _t(...s)}};function Dt(a){return Y<a&&a<X.n}function ne(a){return Y<a&&a<X.P}function Be(a,r,s,i=!0){let{n:d}=X,f=ye(a,!0);if(!Dt(f))return;let c=Ft(f,d),m=J.BASE.multiply(f),C=F(m.x,d);if(C===Y)return;let o=F(c*F(r+s*C,d),d);if(o===Y)return;let l=new Ct(C,o),y=(m.x===l.r?0:2)|Number(m.y&et);return i&&l.hasHighS()&&(l=l.normalizeS(),y^=1),{sig:l,recovery:y}}function At(a){let r;if(typeof a=="bigint")r=a;else if(typeof a=="number"&&Number.isSafeInteger(a)&&a>0)r=BigInt(a);else if(typeof a=="string"){if(a.length!==2*Tt)throw new Error("Expected 32 bytes of private key");r=oe(a)}else if(a instanceof Uint8Array){if(a.length!==Tt)throw new Error("Expected 32 bytes of private key");r=ct(a)}else throw new TypeError("Expected valid private key");if(!Dt(r))throw new Error("Expected private key: 0 < key < n");return r}function be(a){return a instanceof J?(a.assertValidity(),a):J.fromHex(a)}function Le(a){if(a instanceof Ct)return a.assertValidity(),a;try{return Ct.fromDER(a)}catch{return Ct.fromCompact(a)}}function dr(a,r=!1){return J.fromPrivateKey(a).toRawBytes(r)}V.getPublicKey=dr;function pr(a,r,s,i=!1){return J.fromSignature(a,r,s).toRawBytes(i)}V.recoverPublicKey=pr;function Ie(a){let r=a instanceof Uint8Array,s=typeof a=="string",i=(r||s)&&a.length;return r?i===ie||i===se:s?i===ie*2||i===se*2:a instanceof J}function gr(a,r,s=!1){if(Ie(a))throw new TypeError("getSharedSecret: first arg must be private key");if(!Ie(r))throw new TypeError("getSharedSecret: second arg must be public key");let i=be(r);return i.assertValidity(),i.multiply(At(a)).toRawBytes(s)}V.getSharedSecret=gr;function Pe(a){let r=a.length>lt?a.slice(0,lt):a;return ct(r)}function yr(a){let r=Pe(a),s=F(r,X.n);return De(s<Y?r:s)}function De(a){return Pt(a)}function Ue(a,r,s){if(a==null)throw new Error(`sign: expected valid message hash, not "${a}"`);let i=dt(a),d=At(r),f=[De(d),yr(i)];if(s!=null){s===!0&&(s=V.utils.randomBytes(lt));let C=dt(s);if(C.length!==lt)throw new Error(`sign: Expected ${lt} bytes of extra data`);f.push(C)}let c=_t(...f),m=Pe(i);return{seed:c,m,d}}function Fe(a,r){let{sig:s,recovery:i}=a,{der:d,recovered:f}=Object.assign({canonical:!0,der:!0},r),c=d?s.toDERRawBytes():s.toCompactRawBytes();return f?[c,i]:c}async function br(a,r,s={}){let{seed:i,m:d,d:f}=Ue(a,r,s.extraEntropy),c=new ae(Ne,Tt);await c.reseed(i);let m;for(;!(m=Be(await c.generate(),d,f,s.canonical));)await c.reseed();return Fe(m,s)}V.sign=br;function mr(a,r,s={}){let{seed:i,m:d,d:f}=Ue(a,r,s.extraEntropy),c=new ae(Ne,Tt);c.reseedSync(i);let m;for(;!(m=Be(c.generateSync(),d,f,s.canonical));)c.reseedSync();return Fe(m,s)}V.signSync=mr;var wr={strict:!0};function _r(a,r,s,i=wr){let d;try{d=Le(a),r=dt(r)}catch{return!1}let{r:f,s:c}=d;if(i.strict&&d.hasHighS())return!1;let m=ye(r),C;try{C=be(s)}catch{return!1}let{n:o}=X,l=Ft(c,o),y=F(m*l,o),h=F(f*l,o),v=J.BASE.multiplyAndAddUnsafe(C,y,h);return v?F(v.x,o)===f:!1}V.verify=_r;function ce(a){return F(ct(a),X.n)}var Ut=class a{constructor(r,s){this.r=r,this.s=s,this.assertValidity()}static fromHex(r){let s=dt(r);if(s.length!==64)throw new TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${s.length}`);let i=ct(s.subarray(0,32)),d=ct(s.subarray(32,64));return new a(i,d)}assertValidity(){let{r,s}=this;if(!ne(r)||!Dt(s))throw new Error("Invalid signature")}toHex(){return Et(this.r)+Et(this.s)}toRawBytes(){return St(this.toHex())}};function vr(a){return J.fromPrivateKey(a).toRawX()}var ue=class{constructor(r,s,i=V.utils.randomBytes()){if(r==null)throw new TypeError(`sign: Expected valid message, not "${r}"`);this.m=dt(r);let{x:d,scalar:f}=this.getScalar(At(s));if(this.px=d,this.d=f,this.rand=dt(i),this.rand.length!==32)throw new TypeError("sign: Expected 32 bytes of aux randomness")}getScalar(r){let s=J.fromPrivateKey(r),i=s.hasEvenY()?r:X.n-r;return{point:s,scalar:i,x:s.toRawX()}}initNonce(r,s){return Pt(r^ct(s))}finalizeNonce(r){let s=F(ct(r),X.n);if(s===Y)throw new Error("sign: Creation of signature failed. k is zero");let{point:i,x:d,scalar:f}=this.getScalar(s);return{R:i,rx:d,k:f}}finalizeSig(r,s,i,d){return new Ut(r.x,F(s+i*d,X.n)).toRawBytes()}error(){throw new Error("sign: Invalid signature produced")}async calc(){let{m:r,d:s,px:i,rand:d}=this,f=V.utils.taggedHash,c=this.initNonce(s,await f(wt.aux,d)),{R:m,rx:C,k:o}=this.finalizeNonce(await f(wt.nonce,c,i,r)),l=ce(await f(wt.challenge,C,i,r)),y=this.finalizeSig(m,o,l,s);return await He(y,r,i)||this.error(),y}calcSync(){let{m:r,d:s,px:i,rand:d}=this,f=V.utils.taggedHashSync,c=this.initNonce(s,f(wt.aux,d)),{R:m,rx:C,k:o}=this.finalizeNonce(f(wt.nonce,c,i,r)),l=ce(f(wt.challenge,C,i,r)),y=this.finalizeSig(m,o,l,s);return qe(y,r,i)||this.error(),y}};async function Er(a,r,s){return new ue(a,r,s).calc()}function Sr(a,r,s){return new ue(a,r,s).calcSync()}function Me(a,r,s){let i=a instanceof Ut,d=i?a:Ut.fromHex(a);return i&&d.assertValidity(),{...d,m:dt(r),P:be(s)}}function je(a,r,s,i){let d=J.BASE.multiplyAndAddUnsafe(r,At(s),F(-i,X.n));return!(!d||!d.hasEvenY()||d.x!==a)}async function He(a,r,s){try{let{r:i,s:d,m:f,P:c}=Me(a,r,s),m=ce(await V.utils.taggedHash(wt.challenge,Pt(i),c.toRawX(),f));return je(i,c,d,m)}catch{return!1}}function qe(a,r,s){try{let{r:i,s:d,m:f,P:c}=Me(a,r,s),m=ce(V.utils.taggedHashSync(wt.challenge,Pt(i),c.toRawX(),f));return je(i,c,d,m)}catch(i){if(i instanceof Gt)throw i;return!1}}V.schnorr={Signature:Ut,getPublicKey:vr,sign:Er,verify:He,signSync:Sr,verifySync:qe};J.BASE._setWindowSize(8);var at={node:or,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},wt={challenge:"BIP0340/challenge",aux:"BIP0340/aux",nonce:"BIP0340/nonce"},re={};V.utils={bytesToHex:Lt,hexToBytes:St,concatBytes:_t,mod:F,invert:Ft,isValidPrivateKey(a){try{return At(a),!0}catch{return!1}},_bigintTo32Bytes:Pt,_normalizePrivateKey:At,hashToPrivateKey:a=>{a=dt(a);let r=Tt+8;if(a.length<r||a.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");let s=F(ct(a),X.n-et)+et;return Pt(s)},randomBytes:(a=32)=>{if(at.web)return at.web.getRandomValues(new Uint8Array(a));if(at.node){let{randomBytes:r}=at.node;return Uint8Array.from(r(a))}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>V.utils.hashToPrivateKey(V.utils.randomBytes(Tt+8)),precompute(a=8,r=J.BASE){let s=r===J.BASE?r:new J(r.x,r.y);return s._setWindowSize(a),s.multiply(Kt),s},sha256:async(...a)=>{if(at.web){let r=await at.web.subtle.digest("SHA-256",_t(...a));return new Uint8Array(r)}else if(at.node){let{createHash:r}=at.node,s=r("sha256");return a.forEach(i=>s.update(i)),Uint8Array.from(s.digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(a,...r)=>{if(at.web){let s=await at.web.subtle.importKey("raw",a,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),i=_t(...r),d=await at.web.subtle.sign("HMAC",s,i);return new Uint8Array(d)}else if(at.node){let{createHmac:s}=at.node,i=s("sha256",a);return r.forEach(d=>i.update(d)),Uint8Array.from(i.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(a,...r)=>{let s=re[a];if(s===void 0){let i=await V.utils.sha256(Uint8Array.from(a,d=>d.charCodeAt(0)));s=_t(i,i),re[a]=s}return V.utils.sha256(s,...r)},taggedHashSync:(a,...r)=>{if(typeof Bt!="function")throw new Gt("sha256Sync is undefined, you need to set it");let s=re[a];if(s===void 0){let i=Bt(Uint8Array.from(a,d=>d.charCodeAt(0)));s=_t(i,i),re[a]=s}return Bt(s,...r)},_JacobianPoint:it};Object.defineProperties(V.utils,{sha256Sync:{configurable:!1,get(){return Bt},set(a){Bt||(Bt=a)}},hmacSha256Sync:{configurable:!1,get(){return Zt},set(a){Zt||(Zt=a)}}})});var Ve=Yt((Mr,ze)=>{"use strict";ze.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}});var Xe=Yt((jr,Ge)=>{var Xt=typeof window<"u",{schnorr:he}=Xt?window.nobleSecp256k1:We(),Rr=Xt?window.WebSocket:Ve(),Mt=globalThis.crypto,Cr=Xt?a=>btoa(kt(a)).replace("+","-").replace("/","_"):a=>Buffer.from(kt(a)).toString("base64url"),Tr=Xt?a=>Ye(atob(a.replace("-","+").replace("_","/"))):a=>Ye(Buffer.from(a,"base64url").toString("utf8")),Ke=new TextEncoder,Ar=new TextDecoder,kr={filter:{since:Math.floor(Date.now()/1e3)},kind:29001,tags:[],selfsub:!1,silent:!1,verbose:!1},le=class{constructor(r={}){this.subscribed=!1,this.events={},this.tags=[],this.subId=$e(16),this.privkey=r.privkey||$e(32),this.opt={...kr,...r},this.filter={kinds:[this.opt.kind],...r.filter},this.log=(...s)=>r.log?r.log(...s):console.log(...s),this.info=(...s)=>r.silent?null:this.log(...s),this.debug=(...s)=>r.verbose?this.log(...s):null}get connected(){return this.socket?.readyState===1}async importSeed(r){this.privkey=await Hash.from(r).toBytes()}async subscribe(){let r=["REQ",this.subId,this.filter];this.socket.send(JSON.stringify(r)),this.debug("Subscribed with filter:",this.filter)}async connect(r,s){if(r&&(r.includes("://")&&(r=r.split("://")[1]),this.address=r),s&&(this.secret=await fe(s)),!this.address)throw new Error("Must provide a valid relay address!");if(!this.secret)throw new Error("Must provide a shared secret!");if((r!==void 0||this.socket.readyState>1)&&(this.socket=new Rr("wss://"+this.address),this.socket.addEventListener("open",i=>this.openHandler(i)),this.socket.addEventListener("message",i=>this.messageHandler(i)),this.pubkey=await he.getPublicKey(this.privkey,!0),this.topic=kt(await fe(this.secret,2)),typeof this.pubkey!="string"&&(this.pubkey=kt(this.pubkey)),this.tags.push(["h",this.topic]),this.filter["#h"]=[this.topic]),!(this.connected&&this.subscribed))return new Promise((i,d)=>{let f=0,c=10,m=setInterval(()=>{this.connected&&this.subscribed?i(clearInterval(m)):f>c?(this.info("Failed to connect!"),d(clearInterval(m))):f++},500)})}normalizeEvent(r){return r instanceof Uint8Array?JSON.parse(r.toString("utf8")):JSON.parse(r.data)}async decryptContent(r){return Or(r,this.secret).then(s=>JSON.parse(s)).catch(s=>console.error(s))}async openHandler(r){this.info("Socket connected to: ",this.address),this.subscribe()}messageHandler(r){let[s,i,d]=this.normalizeEvent(r);if(this.debug("messageEvent:",[s,i,d]),s==="EOSE"){this.subscribed=!0,this.info("Subscription Id:",this.subId);return}if(s==="EVENT"){this.eventHandler(d);return}}async eventHandler(r){let{content:s,...i}=r,{id:d,pubkey:f,sig:c}=i;if(!he.verify(c,d,f))throw"Event signature failed verification!";if(i?.pubkey===this.pubkey&&!this.opt.selfsub)return;let m=await this.decryptContent(s);if(this.debug("content: "+JSON.stringify(m,null,2)),this.debug("metaData: "+JSON.stringify(i,null,2)),!m)return this.emit("destroy",null,{kind:5,tags:[["e",i.id]]});let[C,o]=m;this.emit(C,o,{eventName:C,...i})}async send(r,s,i={tags:[]}){let d=JSON.stringify([r,s]),f={content:await xr(d,this.secret),created_at:Math.floor(Date.now()/1e3),kind:i.kind||this.opt.kind,tags:[...this.tags,...this.opt.tags,...i.tags],pubkey:this.pubkey},c=await this.getSignedEvent(f);this.debug("sendEvent:",c),this.connected||await this.connect(),this.socket.send(JSON.stringify(["EVENT",c]))}async getSignedEvent(r){let s=JSON.stringify([0,r.pubkey,r.created_at,r.kind,r.tags,r.content]);if(r.id=kt(await fe(s)),r.sig=await he.sign(r.id,this.privkey),!he.verify(r.sig,r.id,r.pubkey))throw"event signature failed verification!";return r.sig instanceof Uint8Array&&(r.sig=kt(r.sig)),r}_getFn(r){return typeof this.events[r]>"u"&&(this.events[r]=new Set),this.events[r]}on(r,s){this._getFn(r).add(s)}once(r,s){let i=(...d)=>{this.remove(r,i),s.apply(this,d)};this.on(r,i)}within(r,s,i){let d=(...f)=>s.apply(this,f);setTimeout(()=>this.remove(r,d),i),this.on(r,d)}emit(r,...s){let i=[...this._getFn("*"),...this._getFn(r)];for(let d of i)d.apply(this,s)}publish(r,s,i){this.send(r,s,i)}remove(r,s){this._getFn(r).delete(s)}close(){this.socket.close(),this.subscribed=!1,this.emit("close",this.subId)}};async function fe(a){typeof a=="string"&&(a=Ke.encode(a));let r=await Mt.subtle.digest("SHA-256",a);return new Uint8Array(r)}async function Ze(a){let r=await fe(a),s={name:"AES-CBC"},i=["encrypt","decrypt"];return Mt.subtle.importKey("raw",r,s,!0,i)}async function xr(a,r){let s=await Ze(r),i=Mt.getRandomValues(new Uint8Array(16)),d=await Mt.subtle.encrypt({name:"AES-CBC",iv:i},s,Ke.encode(a)).then(f=>new Uint8Array(f));return Cr(new Uint8Array([...i,...d]))}async function Or(a,r){let s=await Ze(r),i=Tr(a),d=await Mt.subtle.decrypt({name:"AES-CBC",iv:i.slice(0,16)},s,i.slice(16));return Ar.decode(d)}function kt(a){let r=[],s;for(s=0;s<a.length;s++)r.push(a[s].toString(16).padStart(2,"0"));return r.join("")}function Ye(a){let r=[],s;for(s=0;s<a.length;s+=2)r.push(parseInt(a.substr(s,2),16));return Uint8Array.from(r)}function Ir(a=32){return Mt.getRandomValues(new Uint8Array(a))}function $e(a=32){return kt(Ir(a))}Xt?window.NostrEmitter=le:Ge.exports=le});var Qe=_e(Ee(),1);var Hr=_e(Xe(),1),de=class{constructor(r){if(!r)throw new Error("URL is required");this.emitter=new window.NostrEmitter,this.url=new URL(r),this.sessionId=null}async getOffer(){try{await this.emitter.connect(this.url.origin,this.url.pathname.split("/").pop());let r=Math.floor(Math.random()*1e9);return this.emitter.publish("requestOffer",r),console.log(`Offer requested with reqID: ${r}`),new Promise((s,i)=>{this.emitter.on("offer",d=>{d.reqID===r&&(this.sessionId=d.sessionId,s(d.offer))})})}catch(r){throw console.error(r),new Error("Failed to get offer")}}async sendAnswer(r){if(!this.sessionId)throw new Error("Session ID is required");try{this.emitter.publish("answer",{sessionId:this.sessionId,answer:r})}catch(s){throw console.error(s),new Error("Failed to send answer")}}};var Nr=!1;function jt(...a){Nr&&console.log("[peersocket-client]",...a)}function Br(a){if(a instanceof Uint8Array)return a;if(typeof a=="string")return new TextEncoder().encode(a);if(a instanceof ArrayBuffer)return new Uint8Array(a);if(ArrayBuffer.isView(a))return new Uint8Array(a.buffer);throw new TypeError("invalid data type to be sent")}var Je=class extends EventTarget{constructor(r,s=[],i={}){super(),this.url=r,this.protocols=s,this.options=i,this.binaryType="blob",this.onopen=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onclose=()=>{},this.CONNECTING=0,this.OPEN=1,this.CLOSING=2,this.CLOSED=3,this.status=this.CONNECTING,this.socket=null,this.signaling=new de(r),this.connect()}connect(){this.socket=new Qe.default({trickle:!1}),this.socket.on("error",r=>{this.status=this.CLOSED;let s=new Event("error");this.dispatchEvent(s),this.onerror(s),console.error("[peersocket-client] error in simple-peer",r)}),this.socket.on("signal",r=>{jt("Sending answer",r),this.signaling.sendAnswer(r)}),this.signaling.getOffer().then(r=>{this.socket.signal(r),jt("Offer received")}),this.socket.on("connect",()=>{this.status=this.OPEN;let r=new Event("open");this.onopen(r),this.dispatchEvent(r),jt("Connected to server")}),this.socket.on("close",()=>{this.status=this.CLOSED;let r=new CloseEvent("close");this.dispatchEvent(r),this.onclose(r),jt("Connection closed")}),this.socket.on("data",r=>{let s;if(typeof r=="string")s=r;else if(this.binaryType=="blob")s=new Blob(r);else if(this.binaryType=="arraybuffer")s=r.buffer;else throw new TypeError("invalid binaryType string");let i=new MessageEvent("message",{data:s});this.onmessage(i),this.dispatchEvent(i),jt("Message received",s)})}send(r){if(this.status===this.CONNECTING)throw new DOMException("websocket not ready yet");this.status!==this.CLOSED&&(r instanceof Blob?(async()=>{let s=await r.arrayBuffer();this.socket.send(new Uint8Array(s))})():typeof r=="string"?this.socket.send(r):this.socket.send(Br(r)),jt("Message sent"))}close(){this.status=this.CLOSING,this.socket.destroy()}get readyState(){return this.status}get bufferedAmount(){return 0}get protocol(){return this.protocols[0]||""}get extensions(){return""}};export{Je as Peersocket};
/*! Bundled license information:

simple-peer/simplepeer.min.js:
  (*!
  * The buffer module from node.js, for the browser.
  *
  * @author   Feross Aboukhadijeh <https://feross.org>
  * @license  MIT
  *)
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)
  (*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
  (*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

@noble/secp256k1/lib/index.js:
  (*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) *)
*/
//# sourceMappingURL=peersocket-client-nostr.min.js.map
